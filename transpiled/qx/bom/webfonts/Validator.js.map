{
  "version": 3,
  "sources": [
    "/home/runner/work/hkollmann.mobilegrid/hkollmann.mobilegrid/node_modules/@qooxdoo/framework/source/class/qx/bom/webfonts/Validator.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "fontFamily",
    "comparisonString",
    "fontWeight",
    "fontStyle",
    "setComparisonString",
    "setFontWeight",
    "setFontStyle",
    "setFontFamily",
    "__requestedHelpers",
    "_getRequestedHelpers",
    "statics",
    "COMPARISON_FONTS",
    "sans",
    "serif",
    "HELPER_CSS",
    "position",
    "margin",
    "padding",
    "top",
    "left",
    "fontSize",
    "width",
    "height",
    "lineHeight",
    "fontVariant",
    "visibility",
    "COMPARISON_STRING",
    "__defaultSizes",
    "__defaultHelpers",
    "removeDefaultHelperElements",
    "defaultHelpers",
    "bom",
    "webfonts",
    "Validator",
    "prop",
    "document",
    "body",
    "removeChild",
    "properties",
    "nullable",
    "init",
    "apply",
    "check",
    "timeout",
    "events",
    "changeStatus",
    "members",
    "__checkTimer",
    "__checkStarted",
    "validate",
    "Date",
    "getTime",
    "restart",
    "event",
    "Timer",
    "addListener",
    "__onTimerInterval",
    "once",
    "start",
    "_reset",
    "elem",
    "_isFontValid",
    "__init",
    "style",
    "requestedSans",
    "element",
    "Dimension",
    "getWidth",
    "requestedSerif",
    "cls",
    "fontsSans",
    "getFontFamily",
    "concat",
    "fontsSerif",
    "_getHelperElement",
    "getComparisonString",
    "styleMap",
    "lang",
    "clone",
    "join",
    "getFontWeight",
    "getFontStyle",
    "createElement",
    "innerHTML",
    "Style",
    "setStyles",
    "appendChild",
    "_applyFontFamily",
    "value",
    "old",
    "_applyFontWeight",
    "_applyFontStyle",
    "stop",
    "fireDataEvent",
    "family",
    "valid",
    "now",
    "getTimeout",
    "destruct",
    "removeListener",
    "_disposeObjects"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n************************************************************************ */\n\n/**\n * Checks whether a given font is available on the document and fires events\n * accordingly.\n *\n * This class does not need to be disposed, unless you want to abort the validation\n * early\n */\nqx.Class.define(\"qx.bom.webfonts.Validator\", {\n  extend: qx.core.Object,\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param fontFamily {String} The name of the font to be verified\n   * @param comparisonString {String?} String to be used to detect whether a font was loaded or not\n   * @param fontWeight {String?} the weight of the font to be verified\n   * @param fontStyle {String?} the style of the font to be verified\n   * whether the font has loaded properly\n   */\n  construct(fontFamily, comparisonString, fontWeight, fontStyle) {\n    super();\n\n    if (comparisonString) {\n      this.setComparisonString(comparisonString);\n    }\n\n    if (fontWeight) {\n      this.setFontWeight(fontWeight);\n    }\n    if (fontStyle) {\n      this.setFontStyle(fontStyle);\n    }\n    if (fontFamily) {\n      this.setFontFamily(fontFamily);\n      this.__requestedHelpers = this._getRequestedHelpers();\n    }\n  },\n\n  /*\n  *****************************************************************************\n     STATICS\n  *****************************************************************************\n  */\n\n  statics: {\n    /**\n     * Sets of serif and sans-serif fonts to be used for size comparisons.\n     * At least one of these fonts should be present on any system.\n     */\n    COMPARISON_FONTS: {\n      sans: [\"Arial\", \"Helvetica\", \"sans-serif\"],\n      serif: [\"Times New Roman\", \"Georgia\", \"serif\"]\n    },\n\n    /**\n     * Map of common CSS attributes to be used for all  size comparison elements\n     */\n    HELPER_CSS: {\n      position: \"absolute\",\n      margin: \"0\",\n      padding: \"0\",\n      top: \"-1000px\",\n      left: \"-1000px\",\n      fontSize: \"350px\",\n      width: \"auto\",\n      height: \"auto\",\n      lineHeight: \"normal\",\n      fontVariant: \"normal\",\n      visibility: \"hidden\"\n    },\n\n    /**\n     * The string to be used in the size comparison elements. This is the default string\n     * which is used for the {@link #COMPARISON_FONTS} and the font to be validated. It\n     * can be overridden for the font to be validated using the {@link #comparisonString}\n     * property.\n     */\n    COMPARISON_STRING: \"WEei\",\n    __defaultSizes: null,\n    __defaultHelpers: null,\n\n    /**\n     * Removes the two common helper elements used for all size comparisons from\n     * the DOM\n     */\n    removeDefaultHelperElements() {\n      var defaultHelpers = qx.bom.webfonts.Validator.__defaultHelpers;\n      if (defaultHelpers) {\n        for (var prop in defaultHelpers) {\n          document.body.removeChild(defaultHelpers[prop]);\n        }\n      }\n      delete qx.bom.webfonts.Validator.__defaultHelpers;\n    }\n  },\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties: {\n    /**\n     * The font-family this validator should check\n     */\n    fontFamily: {\n      nullable: true,\n      init: null,\n      apply: \"_applyFontFamily\"\n    },\n\n    /** The font weight to check */\n    fontWeight: {\n      nullable: true,\n      check: \"String\",\n      apply: \"_applyFontWeight\"\n    },\n\n    /** The font style to check */\n    fontStyle: {\n      nullable: true,\n      check: \"String\",\n      apply: \"_applyFontStyle\"\n    },\n\n    /**\n     * Comparison string used to check whether the font has loaded or not.\n     */\n    comparisonString: {\n      nullable: true,\n      init: null\n    },\n\n    /**\n     * Time in milliseconds from the beginning of the check until it is assumed\n     * that a font is not available\n     */\n    timeout: {\n      check: \"Integer\",\n      init: 5000\n    }\n  },\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events: {\n    /**\n     * Fired when the status of a web font has been determined. The event data\n     * is a map with the keys \"family\" (the font-family name) and \"valid\"\n     * (Boolean).\n     */\n    changeStatus: \"qx.event.type.Data\"\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members: {\n    __requestedHelpers: null,\n    __checkTimer: null,\n    __checkStarted: null,\n\n    /*\n    ---------------------------------------------------------------------------\n      PUBLIC API\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Validates the font\n     */\n    validate() {\n      this.__checkStarted = new Date().getTime();\n\n      if (this.__checkTimer) {\n        this.__checkTimer.restart();\n      } else {\n        this.__checkTimer = new qx.event.Timer(100);\n        this.__checkTimer.addListener(\"interval\", this.__onTimerInterval, this);\n        // Give the browser a chance to render the new elements\n        qx.event.Timer.once(\n          function () {\n            this.__checkTimer.start();\n          },\n          this,\n          0\n        );\n      }\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      PROTECTED API\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Removes the helper elements from the DOM\n     */\n    _reset() {\n      if (this.__requestedHelpers) {\n        for (var prop in this.__requestedHelpers) {\n          var elem = this.__requestedHelpers[prop];\n          document.body.removeChild(elem);\n        }\n        this.__requestedHelpers = null;\n      }\n    },\n\n    /**\n     * Checks if the font is available by comparing the widths of the elements\n     * using the generic fonts to the widths of the elements using the font to\n     * be validated\n     *\n     * @return {Boolean} Whether or not the font caused the elements to differ\n     * in size\n     */\n    _isFontValid() {\n      if (!qx.bom.webfonts.Validator.__defaultSizes) {\n        this.__init();\n      }\n\n      if (!this.__requestedHelpers) {\n        this.__requestedHelpers = this._getRequestedHelpers();\n      }\n\n      // force rerendering for chrome\n      this.__requestedHelpers.sans.style.visibility = \"visible\";\n      this.__requestedHelpers.sans.style.visibility = \"hidden\";\n      this.__requestedHelpers.serif.style.visibility = \"visible\";\n      this.__requestedHelpers.serif.style.visibility = \"hidden\";\n\n      var requestedSans = qx.bom.element.Dimension.getWidth(\n        this.__requestedHelpers.sans\n      );\n\n      var requestedSerif = qx.bom.element.Dimension.getWidth(\n        this.__requestedHelpers.serif\n      );\n\n      var cls = qx.bom.webfonts.Validator;\n      if (\n        requestedSans !== cls.__defaultSizes.sans ||\n        requestedSerif !== cls.__defaultSizes.serif\n      ) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Creates the two helper elements styled with the font to be checked\n     *\n     * @return {Map} A map with the keys <pre>sans</pre> and <pre>serif</pre>\n     * and the created span elements as values\n     */\n    _getRequestedHelpers() {\n      var fontsSans = [this.getFontFamily()].concat(\n        qx.bom.webfonts.Validator.COMPARISON_FONTS.sans\n      );\n\n      var fontsSerif = [this.getFontFamily()].concat(\n        qx.bom.webfonts.Validator.COMPARISON_FONTS.serif\n      );\n\n      return {\n        sans: this._getHelperElement(fontsSans, this.getComparisonString()),\n        serif: this._getHelperElement(fontsSerif, this.getComparisonString())\n      };\n    },\n\n    /**\n     * Creates a span element with the comparison text (either {@link #COMPARISON_STRING} or\n     * {@link #comparisonString}) and styled with the default CSS ({@link #HELPER_CSS}) plus\n     * the given font-family value and appends it to the DOM\n     *\n     * @param fontFamily {String} font-family string\n     * @param comparisonString {String?} String to be used to detect whether a font was loaded or not\n     * @return {Element} the created DOM element\n     */\n    _getHelperElement(fontFamily, comparisonString) {\n      var styleMap = qx.lang.Object.clone(qx.bom.webfonts.Validator.HELPER_CSS);\n      if (fontFamily) {\n        if (styleMap.fontFamily) {\n          styleMap.fontFamily += \",\" + fontFamily.join(\",\");\n        } else {\n          styleMap.fontFamily = fontFamily.join(\",\");\n        }\n      }\n      if (this.getFontWeight()) {\n        styleMap.fontWeight = this.getFontWeight();\n      }\n      if (this.getFontStyle()) {\n        styleMap.fontStyle = this.getFontStyle();\n      }\n\n      var elem = document.createElement(\"span\");\n      elem.innerHTML =\n        comparisonString || qx.bom.webfonts.Validator.COMPARISON_STRING;\n      qx.bom.element.Style.setStyles(elem, styleMap);\n      document.body.appendChild(elem);\n      return elem;\n    },\n\n    // property apply\n    _applyFontFamily(value, old) {\n      if (value !== old) {\n        this._reset();\n      }\n    },\n\n    // property apply\n    _applyFontWeight(value, old) {\n      if (value !== old) {\n        this._reset();\n      }\n    },\n\n    // property apply\n    _applyFontStyle(value, old) {\n      if (value !== old) {\n        this._reset();\n      }\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      PRIVATE API\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Creates the default helper elements and gets their widths\n     */\n    __init() {\n      var cls = qx.bom.webfonts.Validator;\n      if (!cls.__defaultHelpers) {\n        cls.__defaultHelpers = {\n          sans: this._getHelperElement(cls.COMPARISON_FONTS.sans),\n          serif: this._getHelperElement(cls.COMPARISON_FONTS.serif)\n        };\n      }\n\n      cls.__defaultSizes = {\n        sans: qx.bom.element.Dimension.getWidth(cls.__defaultHelpers.sans),\n        serif: qx.bom.element.Dimension.getWidth(cls.__defaultHelpers.serif)\n      };\n    },\n\n    /**\n     * Triggers helper element size comparison and fires a ({@link #changeStatus})\n     * event with the result.\n     */\n    __onTimerInterval() {\n      if (this._isFontValid()) {\n        this.__checkTimer.stop();\n        this._reset();\n        this.fireDataEvent(\"changeStatus\", {\n          family: this.getFontFamily(),\n          valid: true\n        });\n      } else {\n        var now = new Date().getTime();\n        if (now - this.__checkStarted >= this.getTimeout()) {\n          this.__checkTimer.stop();\n          this._reset();\n          this.fireDataEvent(\"changeStatus\", {\n            family: this.getFontFamily(),\n            valid: false\n          });\n        }\n      }\n    }\n  },\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct() {\n    this._reset();\n    this.__checkTimer.stop();\n    this.__checkTimer.removeListener(\"interval\", this.__onTimerInterval, this);\n    this._disposeObjects(\"__checkTimer\");\n  }\n});\n"
  ]
}