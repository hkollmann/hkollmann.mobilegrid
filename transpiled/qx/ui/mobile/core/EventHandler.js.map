{
  "version": 3,
  "sources": [
    "/home/runner/work/hkollmann.mobilegrid/hkollmann.mobilegrid/node_modules/@qooxdoo/framework/source/class/qx/ui/mobile/core/EventHandler.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "event",
    "IEventHandler",
    "construct",
    "__manager",
    "Registration",
    "getManager",
    "window",
    "statics",
    "PRIORITY",
    "PRIORITY_FIRST",
    "SUPPORTED_TYPES",
    "mousemove",
    "mouseover",
    "mouseout",
    "mousedown",
    "mouseup",
    "click",
    "dblclick",
    "contextmenu",
    "mousewheel",
    "keyup",
    "keydown",
    "keypress",
    "keyinput",
    "capture",
    "losecapture",
    "focusin",
    "focusout",
    "focus",
    "blur",
    "activate",
    "deactivate",
    "appear",
    "disappear",
    "dragstart",
    "dragend",
    "dragover",
    "dragleave",
    "drop",
    "drag",
    "dragchange",
    "droprequest",
    "roll",
    "touchstart",
    "touchend",
    "touchmove",
    "touchcancel",
    "tap",
    "longtap",
    "swipe",
    "dbltap",
    "track",
    "trackend",
    "trackstart",
    "pinch",
    "rotate",
    "pointermove",
    "pointerover",
    "pointerout",
    "pointerdown",
    "pointerup",
    "pointercancel",
    "IGNORE_CAN_HANDLE",
    "__activeTarget",
    "__scrollLeft",
    "__scrollTop",
    "__startY",
    "__timer",
    "__onPointerDown",
    "domEvent",
    "isPrimary",
    "EventHandler",
    "ui",
    "mobile",
    "bom",
    "Viewport",
    "getScrollLeft",
    "getScrollTop",
    "getScreenTop",
    "__cancelActiveStateTimer",
    "target",
    "getTarget",
    "parentNode",
    "nodeType",
    "element",
    "Attribute",
    "get",
    "___timer",
    "setTimeout",
    "add",
    "__onPointerUp",
    "__removeActiveState",
    "__onPointerMove",
    "deltaY",
    "Math",
    "abs",
    "handler",
    "GestureCore",
    "TAP_MAX_DISTANCE",
    "getPointerType",
    "clearTimeout",
    "activeTarget",
    "remove",
    "members",
    "canHandleEvent",
    "type",
    "Widget",
    "registerEvent",
    "getContainerElement",
    "addListener",
    "_dispatchEvent",
    "unregisterEvent",
    "removeListener",
    "domTarget",
    "id",
    "widgetTarget",
    "getWidgetById",
    "getRelatedTarget",
    "domRelatedTarget",
    "widgetRelatedTarget",
    "currentTarget",
    "getCurrentTarget",
    "currentWidget",
    "getEventPhase",
    "Event",
    "CAPTURING_PHASE",
    "getType",
    "listeners",
    "getListeners",
    "length",
    "widgetEvent",
    "Pool",
    "getInstance",
    "getObject",
    "constructor",
    "clone",
    "setTarget",
    "setRelatedTarget",
    "setCurrentTarget",
    "orig",
    "getOriginalTarget",
    "widgetOriginalTarget",
    "setOriginalTarget",
    "i",
    "l",
    "context",
    "call",
    "getPropagationStopped",
    "stopPropagation",
    "getDefaultPrevented",
    "preventDefault",
    "poolObject",
    "destruct",
    "defer",
    "addHandler",
    "document"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,gCAAhB,EAAkD;AAChDC,IAAAA,MAAM,EAAEN,EAAE,CAACO,IAAH,CAAQC,MADgC;AAEhDC,IAAAA,SAAS,EAAET,EAAE,CAACU,KAAH,CAASC,aAF4B;;AAIhD;AACF;AACA;AACA;AACA;AAEEC,IAAAA,SAVgD,uBAUpC;AACV;AAEA,WAAKC,SAAL,GAAiBb,EAAE,CAACU,KAAH,CAASI,YAAT,CAAsBC,UAAtB,CAAiCC,MAAjC,CAAjB;AACD,KAd+C;;AAgBhD;AACF;AACA;AACA;AACA;AAEEC,IAAAA,OAAO,EAAE;AACP;AACAC,MAAAA,QAAQ,EAAElB,EAAE,CAACU,KAAH,CAASI,YAAT,CAAsBK,cAFzB;;AAIP;AACAC,MAAAA,eAAe,EAAE;AACf;AACAC,QAAAA,SAAS,EAAE,CAFI;AAGfC,QAAAA,SAAS,EAAE,CAHI;AAIfC,QAAAA,QAAQ,EAAE,CAJK;AAKfC,QAAAA,SAAS,EAAE,CALI;AAMfC,QAAAA,OAAO,EAAE,CANM;AAOfC,QAAAA,KAAK,EAAE,CAPQ;AAQfC,QAAAA,QAAQ,EAAE,CARK;AASfC,QAAAA,WAAW,EAAE,CATE;AAUfC,QAAAA,UAAU,EAAE,CAVG;AAYf;AACAC,QAAAA,KAAK,EAAE,CAbQ;AAcfC,QAAAA,OAAO,EAAE,CAdM;AAefC,QAAAA,QAAQ,EAAE,CAfK;AAgBfC,QAAAA,QAAQ,EAAE,CAhBK;AAkBf;AACAC,QAAAA,OAAO,EAAE,CAnBM;AAoBfC,QAAAA,WAAW,EAAE,CApBE;AAsBf;AACAC,QAAAA,OAAO,EAAE,CAvBM;AAwBfC,QAAAA,QAAQ,EAAE,CAxBK;AAyBfC,QAAAA,KAAK,EAAE,CAzBQ;AA0BfC,QAAAA,IAAI,EAAE,CA1BS;AA2BfC,QAAAA,QAAQ,EAAE,CA3BK;AA4BfC,QAAAA,UAAU,EAAE,CA5BG;AA8Bf;AACAC,QAAAA,MAAM,EAAE,CA/BO;AAgCfC,QAAAA,SAAS,EAAE,CAhCI;AAkCf;AACA;AAEA;AACAC,QAAAA,SAAS,EAAE,CAtCI;AAuCfC,QAAAA,OAAO,EAAE,CAvCM;AAwCfC,QAAAA,QAAQ,EAAE,CAxCK;AAyCfC,QAAAA,SAAS,EAAE,CAzCI;AA0CfC,QAAAA,IAAI,EAAE,CA1CS;AA2CfC,QAAAA,IAAI,EAAE,CA3CS;AA4CfC,QAAAA,UAAU,EAAE,CA5CG;AA6CfC,QAAAA,WAAW,EAAE,CA7CE;AA+Cf;AACAC,QAAAA,IAAI,EAAE,CAhDS;AAkDf;AACAC,QAAAA,UAAU,EAAE,CAnDG;AAoDfC,QAAAA,QAAQ,EAAE,CApDK;AAqDfC,QAAAA,SAAS,EAAE,CArDI;AAsDfC,QAAAA,WAAW,EAAE,CAtDE;AAwDf;AACAC,QAAAA,GAAG,EAAE,CAzDU;AA0DfC,QAAAA,OAAO,EAAE,CA1DM;AA2DfC,QAAAA,KAAK,EAAE,CA3DQ;AA4DfC,QAAAA,MAAM,EAAE,CA5DO;AA6DfC,QAAAA,KAAK,EAAE,CA7DQ;AA8DfC,QAAAA,QAAQ,EAAE,CA9DK;AA+DfC,QAAAA,UAAU,EAAE,CA/DG;AAgEfC,QAAAA,KAAK,EAAE,CAhEQ;AAiEfC,QAAAA,MAAM,EAAE,CAjEO;AAmEf;AACAC,QAAAA,WAAW,EAAE,CApEE;AAqEfC,QAAAA,WAAW,EAAE,CArEE;AAsEfC,QAAAA,UAAU,EAAE,CAtEG;AAuEfC,QAAAA,WAAW,EAAE,CAvEE;AAwEfC,QAAAA,SAAS,EAAE,CAxEI;AAyEfC,QAAAA,aAAa,EAAE;AAzEA,OALV;;AAiFP;AACAC,MAAAA,iBAAiB,EAAE,KAlFZ;AAoFPC,MAAAA,SAAc,EAAE,IApFT;AAqFPC,MAAAA,SAAY,EAAE,IArFP;AAsFPC,MAAAA,SAAW,EAAE,IAtFN;AAuFPC,MAAAA,SAAQ,EAAE,IAvFH;AAwFPC,MAAAA,SAAO,EAAE,IAxFF;;AA0FP;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,MAAAA,SAjGO,qBAiGSC,QAjGT,EAiGmB;AACxB,YAAI,CAACA,QAAQ,CAACC,SAAT,EAAL,EAA2B;AACzB;AACD;;AAED,YAAIC,YAAY,GAAGjF,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB0E,YAArC;AAEAA,QAAAA,YAAY,CAACP,SAAb,GAA4B1E,EAAE,CAACoF,GAAH,CAAOC,QAAP,CAAgBC,aAAhB,EAA5B;AACAL,QAAAA,YAAY,CAACN,SAAb,GAA2B3E,EAAE,CAACoF,GAAH,CAAOC,QAAP,CAAgBE,YAAhB,EAA3B;AAEAN,QAAAA,YAAY,CAACL,SAAb,GAAwBG,QAAQ,CAACS,YAAT,EAAxB;;AAEAP,QAAAA,YAAY,CAACQ,SAAb;;AAEA,YAAIC,MAAM,GAAGX,QAAQ,CAACY,SAAT,EAAb;;AACA,eACED,MAAM,IACNA,MAAM,CAACE,UADP,IAEAF,MAAM,CAACE,UAAP,CAAkBC,QAAlB,IAA8B,CAF9B,IAGA7F,EAAE,CAACoF,GAAH,CAAOU,OAAP,CAAeC,SAAf,CAAyBC,GAAzB,CAA6BN,MAA7B,EAAqC,kBAArC,KAA4D,MAJ9D,EAKE;AACAA,UAAAA,MAAM,GAAGA,MAAM,CAACE,UAAhB;AACD;;AAEDX,QAAAA,YAAY,CAACR,SAAb,GAA8BiB,MAA9B;AACAT,QAAAA,YAAY,CAACgB,SAAb,GAAwBjF,MAAM,CAACkF,UAAP,CAAkB,YAAY;AACpDjB,UAAAA,YAAY,CAACgB,SAAb,GAAwB,IAAxB;AACA,cAAIP,MAAM,GAAGT,YAAY,CAACR,SAA1B;;AACA,cACEiB,MAAM,IACN1F,EAAE,CAACoF,GAAH,CAAOU,OAAP,CAAeC,SAAf,CAAyBC,GAAzB,CAA6BN,MAA7B,EAAqC,iBAArC,KAA2D,OAF7D,EAGE;AACA1F,YAAAA,EAAE,CAACoF,GAAH,CAAOU,OAAP,CAAe1F,KAAf,CAAqB+F,GAArB,CAAyBT,MAAzB,EAAiC,QAAjC;AACD;AACF,SATuB,EASrB,GATqB,CAAxB;AAUD,OApIM;;AAsIP;AACJ;AACA;AACA;AACA;AACA;AACIU,MAAAA,SA5IO,qBA4IOrB,QA5IP,EA4IiB;AACtB/E,QAAAA,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB0E,YAAlB,CAA+BoB,UAA/B;AACD,OA9IM;;AAgJP;AACJ;AACA;AACA;AACA;AACA;AACA;AACIC,MAAAA,UAvJO,sBAuJSvB,QAvJT,EAuJmB;AACxB,YAAI,CAACA,QAAQ,CAACC,SAAT,EAAL,EAA2B;AACzB;AACD;;AAED,YAAIC,YAAY,GAAGjF,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB0E,YAArC;;AACA,YAAIsB,MAAM,GAAGxB,QAAQ,CAACS,YAAT,KAA0BP,YAAY,CAACL,SAApD;;AACA,YACEK,YAAY,CAACR,SAAb,IACA+B,IAAI,CAACC,GAAL,CAASF,MAAT,KACEvG,EAAE,CAACU,KAAH,CAASgG,OAAT,CAAiBC,WAAjB,CAA6BC,gBAA7B,CACE7B,QAAQ,CAAC8B,cAAT,EADF,CAHJ,EAME;AACA5B,UAAAA,YAAY,CAACoB,UAAb;AACD;;AAED,YACEpB,YAAY,CAACR,SAAb,KACCQ,YAAY,CAACP,SAAb,IAA6B1E,EAAE,CAACoF,GAAH,CAAOC,QAAP,CAAgBC,aAAhB,EAA7B,IACCL,YAAY,CAACN,SAAb,IAA4B3E,EAAE,CAACoF,GAAH,CAAOC,QAAP,CAAgBE,YAAhB,EAF9B,CADF,EAIE;AACAN,UAAAA,YAAY,CAACoB,UAAb;AACD;AACF,OA/KM;;AAiLP;AACJ;AACA;AACIZ,MAAAA,SApLO,uBAoLoB;AACzB,YAAIR,YAAY,GAAGjF,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB0E,YAArC;;AACA,YAAIA,YAAY,CAACgB,SAAjB,EAA2B;AACzBjF,UAAAA,MAAM,CAAC8F,YAAP,CAAoB7B,YAAY,CAACgB,SAAjC;AACAhB,UAAAA,YAAY,CAACgB,SAAb,GAAwB,IAAxB;AACD;AACF,OA1LM;;AA4LP;AACJ;AACA;AACII,MAAAA,UA/LO,wBA+Le;AACpB,YAAIpB,YAAY,GAAGjF,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB0E,YAArC;;AACAA,QAAAA,YAAY,CAACQ,SAAb;;AACA,YAAIsB,YAAY,GAAG9B,YAAY,CAACR,SAAhC;;AACA,YAAIsC,YAAJ,EAAkB;AAChB/G,UAAAA,EAAE,CAACoF,GAAH,CAAOU,OAAP,CAAe1F,KAAf,CAAqB4G,MAArB,CAA4BD,YAA5B,EAA0C,QAA1C;AACD;;AACD9B,QAAAA,YAAY,CAACR,SAAb,GAA8B,IAA9B;AACD;AAvMM,KAtBuC;;AAgOhD;AACF;AACA;AACA;AACA;AAEEwC,IAAAA,OAAO,EAAE;AACPpG,MAAAA,SAAS,EAAE,IADJ;AAGP;AACAqG,MAAAA,cAJO,0BAIQxB,MAJR,EAIgByB,IAJhB,EAIsB;AAC3B,eAAOzB,MAAM,YAAY1F,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB6G,MAA3C;AACD,OANM;AAQP;AACAC,MAAAA,aATO,yBASO3B,MATP,EASeyB,IATf,EASqBjF,OATrB,EAS8B;AACnC,YAAI4D,OAAO,GAAGJ,MAAM,CAAC4B,mBAAP,EAAd;AACAtH,QAAAA,EAAE,CAACU,KAAH,CAASI,YAAT,CAAsByG,WAAtB,CACEzB,OADF,EAEEqB,IAFF,EAGE,KAAKK,cAHP,EAIE,IAJF,EAKEtF,OALF;AAOD,OAlBM;AAoBP;AACAuF,MAAAA,eArBO,2BAqBS/B,MArBT,EAqBiByB,IArBjB,EAqBuBjF,OArBvB,EAqBgC;AACrC,YAAI4D,OAAO,GAAGJ,MAAM,CAAC4B,mBAAP,EAAd;AACAtH,QAAAA,EAAE,CAACU,KAAH,CAASI,YAAT,CAAsB4G,cAAtB,CACE5B,OADF,EAEEqB,IAFF,EAGE,KAAKK,cAHP,EAIE,IAJF,EAKEtF,OALF;AAOD,OA9BM;;AAgCP;AACJ;AACA;AACA;AACA;AACIsF,MAAAA,cArCO,0BAqCQzC,QArCR,EAqCkB;AACvB;AACA,YAAI4C,SAAS,GAAG5C,QAAQ,CAACY,SAAT,EAAhB;;AACA,YAAI,CAACgC,SAAD,IAAcA,SAAS,CAACC,EAAV,IAAgB,IAAlC,EAAwC;AACtC;AACD;;AACD,YAAIC,YAAY,GAAG7H,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB6G,MAAlB,CAAyBU,aAAzB,CAAuCH,SAAS,CAACC,EAAjD,CAAnB,CANuB,CAQvB;;AACA,YAAI7C,QAAQ,CAACgD,gBAAb,EAA+B;AAC7B,cAAIC,gBAAgB,GAAGjD,QAAQ,CAACgD,gBAAT,EAAvB;;AAEA,cAAIC,gBAAgB,IAAIA,gBAAgB,CAACJ,EAAzC,EAA6C;AAC3C,gBAAIK,mBAAmB,GAAGjI,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB6G,MAAlB,CAAyBU,aAAzB,CACxBE,gBAAgB,CAACJ,EADO,CAA1B;AAGD;AACF,SAjBsB,CAmBvB;;;AACA,YAAIM,aAAa,GAAGnD,QAAQ,CAACoD,gBAAT,EAApB;AACA,YAAIC,aAAa,GAAGpI,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB6G,MAAlB,CAAyBU,aAAzB,CAClBI,aAAa,CAACN,EADI,CAApB;;AAIA,YAAI,CAACQ,aAAL,EAAoB;AAClB;AACD,SA3BsB,CA6BvB;AAEA;;;AACA,YAAIlG,OAAO,GACT6C,QAAQ,CAACsD,aAAT,MAA4BrI,EAAE,CAACU,KAAH,CAASyG,IAAT,CAAcmB,KAAd,CAAoBC,eADlD;AAEA,YAAIpB,IAAI,GAAGpC,QAAQ,CAACyD,OAAT,EAAX;;AACA,YAAIC,SAAS,GAAG,KAAK5H,SAAL,CAAe6H,YAAf,CAA4BN,aAA5B,EAA2CjB,IAA3C,EAAiDjF,OAAjD,CAAhB;;AACA,YAAI,CAACuG,SAAD,IAAcA,SAAS,CAACE,MAAV,KAAqB,CAAvC,EAA0C;AACxC;AACD,SAtCsB,CAwCvB;;;AACA,YAAIC,WAAW,GAAG5I,EAAE,CAACU,KAAH,CAASmI,IAAT,CAAcC,WAAd,GAA4BC,SAA5B,CAChBhE,QAAQ,CAACiE,WADO,CAAlB;AAIAjE,QAAAA,QAAQ,CAACkE,KAAT,CAAeL,WAAf;AAEAA,QAAAA,WAAW,CAACM,SAAZ,CAAsBrB,YAAtB;AACAe,QAAAA,WAAW,CAACO,gBAAZ,CAA6BlB,mBAAmB,IAAI,IAApD;AACAW,QAAAA,WAAW,CAACQ,gBAAZ,CAA6BhB,aAA7B,EAjDuB,CAmDvB;;AACA,YAAIiB,IAAI,GAAGtE,QAAQ,CAACuE,iBAAT,EAAX;;AACA,YAAID,IAAI,IAAIA,IAAI,CAACzB,EAAjB,EAAqB;AACnB,cAAI2B,oBAAoB,GAAGvJ,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB6G,MAAlB,CAAyBU,aAAzB,CACzBuB,IAAI,CAACzB,EADoB,CAA3B;AAIAgB,UAAAA,WAAW,CAACY,iBAAZ,CAA8BD,oBAA9B;AACD,SAND,MAMO;AACLX,UAAAA,WAAW,CAACY,iBAAZ,CAA8B7B,SAA9B;AACD,SA7DsB,CA+DvB;;;AACA,aAAK,IAAI8B,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGjB,SAAS,CAACE,MAA9B,EAAsCc,CAAC,GAAGC,CAA1C,EAA6CD,CAAC,EAA9C,EAAkD;AAChD,cAAIE,OAAO,GAAGlB,SAAS,CAACgB,CAAD,CAAT,CAAaE,OAAb,IAAwBvB,aAAtC;AACAK,UAAAA,SAAS,CAACgB,CAAD,CAAT,CAAa/C,OAAb,CAAqBkD,IAArB,CAA0BD,OAA1B,EAAmCf,WAAnC;AACD,SAnEsB,CAqEvB;;;AACA,YAAIA,WAAW,CAACiB,qBAAZ,EAAJ,EAAyC;AACvC9E,UAAAA,QAAQ,CAAC+E,eAAT;AACD;;AAED,YAAIlB,WAAW,CAACmB,mBAAZ,EAAJ,EAAuC;AACrChF,UAAAA,QAAQ,CAACiF,cAAT;AACD,SA5EsB,CA8EvB;;;AACAhK,QAAAA,EAAE,CAACU,KAAH,CAASmI,IAAT,CAAcC,WAAd,GAA4BmB,UAA5B,CAAuCrB,WAAvC;AACD;AArHM,KAtOuC;;AA8VhD;AACF;AACA;AACA;AACA;AAEEsB,IAAAA,QApWgD,sBAoWrC;AACT,WAAKrJ,SAAL,GAAiB,IAAjB;AACD,KAtW+C;;AAwWhD;AACF;AACA;AACA;AACA;AAEEsJ,IAAAA,KA9WgD,iBA8W1ClJ,OA9W0C,EA8WjC;AACbjB,MAAAA,EAAE,CAACU,KAAH,CAASI,YAAT,CAAsBsJ,UAAtB,CAAiCnJ,OAAjC;AACAjB,MAAAA,EAAE,CAACU,KAAH,CAASI,YAAT,CAAsByG,WAAtB,CACE8C,QADF,EAEE,aAFF,EAGEpJ,OAAO,CAAC6D,SAHV;AAMA9E,MAAAA,EAAE,CAACU,KAAH,CAASI,YAAT,CAAsByG,WAAtB,CACE8C,QADF,EAEE,WAFF,EAGEpJ,OAAO,CAACmF,SAHV;AAMApG,MAAAA,EAAE,CAACU,KAAH,CAASI,YAAT,CAAsByG,WAAtB,CACE8C,QADF,EAEE,eAFF,EAGEpJ,OAAO,CAACmF,SAHV;AAMApG,MAAAA,EAAE,CAACU,KAAH,CAASI,YAAT,CAAsByG,WAAtB,CACE8C,QADF,EAEE,aAFF,EAGEpJ,OAAO,CAACqF,UAHV;AAKD;AAvY+C,GAAlD;AA1BAtG,EAAAA,EAAE,CAACkF,EAAH,CAAMC,MAAN,CAAa5E,IAAb,CAAkB0E,YAAlB,CAA+B9E,aAA/B,GAA+CA,aAA/C",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tino Butz (tbtz)\n\n************************************************************************ */\n\n/**\n * Connects the widgets to the browser DOM events.\n *\n * @require(qx.event.handler.Touch)\n * @require(qx.event.handler.Pointer)\n * @require(qx.event.dispatch.DomBubbling)\n * @require(qx.ui.mobile.core.Widget)\n */\nqx.Class.define(\"qx.ui.mobile.core.EventHandler\", {\n  extend: qx.core.Object,\n  implement: qx.event.IEventHandler,\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  construct() {\n    super();\n\n    this.__manager = qx.event.Registration.getManager(window);\n  },\n\n  /*\n  *****************************************************************************\n     STATICS\n  *****************************************************************************\n  */\n\n  statics: {\n    /** @type {Integer} Priority of this handler */\n    PRIORITY: qx.event.Registration.PRIORITY_FIRST,\n\n    /** @type {Map} Supported event types. Identical to events map of qx.ui.core.Widget */\n    SUPPORTED_TYPES: {\n      // mouse events\n      mousemove: 1,\n      mouseover: 1,\n      mouseout: 1,\n      mousedown: 1,\n      mouseup: 1,\n      click: 1,\n      dblclick: 1,\n      contextmenu: 1,\n      mousewheel: 1,\n\n      // key events\n      keyup: 1,\n      keydown: 1,\n      keypress: 1,\n      keyinput: 1,\n\n      // mouse capture\n      capture: 1,\n      losecapture: 1,\n\n      // focus events\n      focusin: 1,\n      focusout: 1,\n      focus: 1,\n      blur: 1,\n      activate: 1,\n      deactivate: 1,\n\n      // appear events\n      appear: 1,\n      disappear: 1,\n\n      // resize event\n      // resize : 1,\n\n      // drag drop events\n      dragstart: 1,\n      dragend: 1,\n      dragover: 1,\n      dragleave: 1,\n      drop: 1,\n      drag: 1,\n      dragchange: 1,\n      droprequest: 1,\n\n      // scroll events\n      roll: 1,\n\n      // touch events\n      touchstart: 1,\n      touchend: 1,\n      touchmove: 1,\n      touchcancel: 1,\n\n      // gestures\n      tap: 1,\n      longtap: 1,\n      swipe: 1,\n      dbltap: 1,\n      track: 1,\n      trackend: 1,\n      trackstart: 1,\n      pinch: 1,\n      rotate: 1,\n\n      // pointer events\n      pointermove: 1,\n      pointerover: 1,\n      pointerout: 1,\n      pointerdown: 1,\n      pointerup: 1,\n      pointercancel: 1\n    },\n\n    /** @type {Integer} Whether the method \"canHandleEvent\" must be called */\n    IGNORE_CAN_HANDLE: false,\n\n    __activeTarget: null,\n    __scrollLeft: null,\n    __scrollTop: null,\n    __startY: null,\n    __timer: null,\n\n    /**\n     * Event handler. Called when the pointerdown event occurs.\n     * Sets the <code>active</class> class to the event target after a certain\n     * time.\n     *\n     * @param domEvent {qx.event.type.Pointer} The pointerdown event\n     */\n    __onPointerDown(domEvent) {\n      if (!domEvent.isPrimary()) {\n        return;\n      }\n\n      var EventHandler = qx.ui.mobile.core.EventHandler;\n\n      EventHandler.__scrollLeft = qx.bom.Viewport.getScrollLeft();\n      EventHandler.__scrollTop = qx.bom.Viewport.getScrollTop();\n\n      EventHandler.__startY = domEvent.getScreenTop();\n\n      EventHandler.__cancelActiveStateTimer();\n\n      var target = domEvent.getTarget();\n      while (\n        target &&\n        target.parentNode &&\n        target.parentNode.nodeType == 1 &&\n        qx.bom.element.Attribute.get(target, \"data-activatable\") != \"true\"\n      ) {\n        target = target.parentNode;\n      }\n\n      EventHandler.__activeTarget = target;\n      EventHandler.___timer = window.setTimeout(function () {\n        EventHandler.___timer = null;\n        var target = EventHandler.__activeTarget;\n        if (\n          target &&\n          qx.bom.element.Attribute.get(target, \"data-selectable\") != \"false\"\n        ) {\n          qx.bom.element.Class.add(target, \"active\");\n        }\n      }, 100);\n    },\n\n    /**\n     * Event handler. Called when the pointerup event occurs.\n     * Removes the <code>active</class> class from the event target.\n     *\n     * @param domEvent {qx.event.type.Pointer} The pointerup event\n     */\n    __onPointerUp(domEvent) {\n      qx.ui.mobile.core.EventHandler.__removeActiveState();\n    },\n\n    /**\n     * Event handler. Called when the pointermove event occurs.\n     * Removes the <code>active</class> class from the event target\n     * when the viewport was scrolled.\n     *\n     * @param domEvent {qx.event.type.Pointer} The pointermove event\n     */\n    __onPointerMove(domEvent) {\n      if (!domEvent.isPrimary()) {\n        return;\n      }\n\n      var EventHandler = qx.ui.mobile.core.EventHandler;\n      var deltaY = domEvent.getScreenTop() - EventHandler.__startY;\n      if (\n        EventHandler.__activeTarget &&\n        Math.abs(deltaY) >=\n          qx.event.handler.GestureCore.TAP_MAX_DISTANCE[\n            domEvent.getPointerType()\n          ]\n      ) {\n        EventHandler.__removeActiveState();\n      }\n\n      if (\n        EventHandler.__activeTarget &&\n        (EventHandler.__scrollLeft != qx.bom.Viewport.getScrollLeft() ||\n          EventHandler.__scrollTop != qx.bom.Viewport.getScrollTop())\n      ) {\n        EventHandler.__removeActiveState();\n      }\n    },\n\n    /**\n     * Cancels the active state timer.\n     */\n    __cancelActiveStateTimer() {\n      var EventHandler = qx.ui.mobile.core.EventHandler;\n      if (EventHandler.___timer) {\n        window.clearTimeout(EventHandler.___timer);\n        EventHandler.___timer = null;\n      }\n    },\n\n    /**\n     * Removes the <code>active</class> class from the active target.\n     */\n    __removeActiveState() {\n      var EventHandler = qx.ui.mobile.core.EventHandler;\n      EventHandler.__cancelActiveStateTimer();\n      var activeTarget = EventHandler.__activeTarget;\n      if (activeTarget) {\n        qx.bom.element.Class.remove(activeTarget, \"active\");\n      }\n      EventHandler.__activeTarget = null;\n    }\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members: {\n    __manager: null,\n\n    // interface implementation\n    canHandleEvent(target, type) {\n      return target instanceof qx.ui.mobile.core.Widget;\n    },\n\n    // interface implementation\n    registerEvent(target, type, capture) {\n      var element = target.getContainerElement();\n      qx.event.Registration.addListener(\n        element,\n        type,\n        this._dispatchEvent,\n        this,\n        capture\n      );\n    },\n\n    // interface implementation\n    unregisterEvent(target, type, capture) {\n      var element = target.getContainerElement();\n      qx.event.Registration.removeListener(\n        element,\n        type,\n        this._dispatchEvent,\n        this,\n        capture\n      );\n    },\n\n    /**\n     * Dispatches a DOM event on a widget.\n     *\n     * @param domEvent {qx.event.type.Event} The event object to dispatch.\n     */\n    _dispatchEvent(domEvent) {\n      // EVENT TARGET\n      var domTarget = domEvent.getTarget();\n      if (!domTarget || domTarget.id == null) {\n        return;\n      }\n      var widgetTarget = qx.ui.mobile.core.Widget.getWidgetById(domTarget.id);\n\n      // EVENT RELATED TARGET\n      if (domEvent.getRelatedTarget) {\n        var domRelatedTarget = domEvent.getRelatedTarget();\n\n        if (domRelatedTarget && domRelatedTarget.id) {\n          var widgetRelatedTarget = qx.ui.mobile.core.Widget.getWidgetById(\n            domRelatedTarget.id\n          );\n        }\n      }\n\n      // EVENT CURRENT TARGET\n      var currentTarget = domEvent.getCurrentTarget();\n      var currentWidget = qx.ui.mobile.core.Widget.getWidgetById(\n        currentTarget.id\n      );\n\n      if (!currentWidget) {\n        return;\n      }\n\n      // PROCESS LISTENERS\n\n      // Load listeners\n      var capture =\n        domEvent.getEventPhase() == qx.event.type.Event.CAPTURING_PHASE;\n      var type = domEvent.getType();\n      var listeners = this.__manager.getListeners(currentWidget, type, capture);\n      if (!listeners || listeners.length === 0) {\n        return;\n      }\n\n      // Create cloned event with correct target\n      var widgetEvent = qx.event.Pool.getInstance().getObject(\n        domEvent.constructor\n      );\n\n      domEvent.clone(widgetEvent);\n\n      widgetEvent.setTarget(widgetTarget);\n      widgetEvent.setRelatedTarget(widgetRelatedTarget || null);\n      widgetEvent.setCurrentTarget(currentWidget);\n\n      // Keep original target of DOM event, otherwise map it to the original\n      var orig = domEvent.getOriginalTarget();\n      if (orig && orig.id) {\n        var widgetOriginalTarget = qx.ui.mobile.core.Widget.getWidgetById(\n          orig.id\n        );\n\n        widgetEvent.setOriginalTarget(widgetOriginalTarget);\n      } else {\n        widgetEvent.setOriginalTarget(domTarget);\n      }\n\n      // Dispatch it on all listeners\n      for (var i = 0, l = listeners.length; i < l; i++) {\n        var context = listeners[i].context || currentWidget;\n        listeners[i].handler.call(context, widgetEvent);\n      }\n\n      // Synchronize propagation stopped/prevent default property\n      if (widgetEvent.getPropagationStopped()) {\n        domEvent.stopPropagation();\n      }\n\n      if (widgetEvent.getDefaultPrevented()) {\n        domEvent.preventDefault();\n      }\n\n      // Release the event instance to the event pool\n      qx.event.Pool.getInstance().poolObject(widgetEvent);\n    }\n  },\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct() {\n    this.__manager = null;\n  },\n\n  /*\n  *****************************************************************************\n     DEFER\n  *****************************************************************************\n  */\n\n  defer(statics) {\n    qx.event.Registration.addHandler(statics);\n    qx.event.Registration.addListener(\n      document,\n      \"pointerdown\",\n      statics.__onPointerDown\n    );\n\n    qx.event.Registration.addListener(\n      document,\n      \"pointerup\",\n      statics.__onPointerUp\n    );\n\n    qx.event.Registration.addListener(\n      document,\n      \"pointercancel\",\n      statics.__onPointerUp\n    );\n\n    qx.event.Registration.addListener(\n      document,\n      \"pointermove\",\n      statics.__onPointerMove\n    );\n  }\n});\n"
  ]
}