{
  "version": 3,
  "sources": [
    "/home/runner/work/hkollmann.mobilegrid/hkollmann.mobilegrid/node_modules/@qooxdoo/framework/source/class/qx/ui/menu/Manager.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "extend",
    "core",
    "Object",
    "construct",
    "__objects",
    "el",
    "document",
    "body",
    "Registration",
    "event",
    "addListener",
    "window",
    "documentElement",
    "_onPointerDown",
    "_onRoll",
    "_onKeyUpDown",
    "_onKeyPress",
    "Environment",
    "get",
    "bom",
    "Element",
    "hideAll",
    "__openTimer",
    "Timer",
    "_onOpenInterval",
    "__closeTimer",
    "_onCloseInterval",
    "members",
    "__scheduleOpen",
    "__scheduleClose",
    "_getChild",
    "menu",
    "start",
    "iter",
    "loop",
    "children",
    "getChildren",
    "length",
    "child",
    "i",
    "isEnabled",
    "isAnonymous",
    "isVisible",
    "_isInMenu",
    "widget",
    "ui",
    "Menu",
    "getLayoutParent",
    "_isMenuOpener",
    "menus",
    "getOpener",
    "_getMenuButton",
    "AbstractButton",
    "add",
    "obj",
    "reg",
    "push",
    "setZIndex",
    "remove",
    "lang",
    "Array",
    "exclude",
    "getActiveMenu",
    "scheduleOpen",
    "cancelClose",
    "cancelOpen",
    "restartWith",
    "getOpenInterval",
    "scheduleClose",
    "getCloseInterval",
    "stop",
    "e",
    "open",
    "preventContextMenuOnce",
    "__onPreventContextMenu",
    "target",
    "getTarget",
    "Widget",
    "getWidgetByElement",
    "stopPropagation",
    "preventDefault",
    "removeListener",
    "getMenu",
    "__selectionKeys",
    "Enter",
    "Space",
    "__navigationKeys",
    "Tab",
    "Escape",
    "Up",
    "Down",
    "Left",
    "Right",
    "iden",
    "getKeyIdentifier",
    "getSelectedButton",
    "navigation",
    "selection",
    "_onKeyPressUp",
    "_onKeyPressDown",
    "_onKeyPressLeft",
    "_onKeyPressRight",
    "button",
    "_onKeyPressEnter",
    "_onKeyPressSpace",
    "selectedButton",
    "indexOf",
    "nextItem",
    "setSelectedButton",
    "resetSelectedButton",
    "menuOpener",
    "parentMenu",
    "resetOpenedButton",
    "menubar",
    "Button",
    "buttons",
    "getMenuBar",
    "getMenuButtons",
    "index",
    "prevButton",
    "subMenu",
    "setOpenedButton",
    "first",
    "getOpenedButton",
    "nextButton",
    "hasListener",
    "clone",
    "setBubbles",
    "setTarget",
    "dispatchEvent",
    "getMomentum",
    "destruct",
    "_disposeObjects",
    "_disposeArray",
    "Manager"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n\n************************************************************************ */\n\n/**\n * This singleton manages visible menu instances and supports some\n * core features to schedule menu open/close with timeout support.\n *\n * It also manages the whole keyboard support for the currently\n * registered widgets.\n *\n * The zIndex order is also managed by this class.\n */\nqx.Class.define(\"qx.ui.menu.Manager\", {\n  type: \"singleton\",\n  extend: qx.core.Object,\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  construct() {\n    super();\n\n    // Create data structure\n    this.__objects = [];\n\n    var el = document.body;\n    var Registration = qx.event.Registration;\n\n    // React on pointer/mouse events, but on native, to support inline applications\n    Registration.addListener(\n      window.document.documentElement,\n      \"pointerdown\",\n      this._onPointerDown,\n      this,\n      true\n    );\n\n    Registration.addListener(el, \"roll\", this._onRoll, this, true);\n\n    // React on keypress events\n    Registration.addListener(el, \"keydown\", this._onKeyUpDown, this, true);\n    Registration.addListener(el, \"keyup\", this._onKeyUpDown, this, true);\n    Registration.addListener(el, \"keypress\", this._onKeyPress, this, true);\n\n    // only use the blur event to hide windows on non touch devices [BUG #4033]\n    // When the menu is located on top of an iFrame, the select will fail\n    if (!qx.core.Environment.get(\"event.touch\")) {\n      // Hide all when the window is blurred\n      qx.bom.Element.addListener(window, \"blur\", this.hideAll, this);\n    }\n\n    // Create open timer\n    this.__openTimer = new qx.event.Timer();\n    this.__openTimer.addListener(\"interval\", this._onOpenInterval, this);\n\n    // Create close timer\n    this.__closeTimer = new qx.event.Timer();\n    this.__closeTimer.addListener(\"interval\", this._onCloseInterval, this);\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n  /* eslint-disable @qooxdoo/qx/no-refs-in-members */\n\n  members: {\n    __scheduleOpen: null,\n    __scheduleClose: null,\n    __openTimer: null,\n    __closeTimer: null,\n    __objects: null,\n\n    /*\n    ---------------------------------------------------------------------------\n      HELPER METHODS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Query engine for menu children.\n     *\n     * @param menu {qx.ui.menu.Menu} Any menu instance\n     * @param start {Integer} Child index to start with\n     * @param iter {Integer} Iteration count, normally <code>+1</code> or <code>-1</code>\n     * @param loop {Boolean?false} Whether to wrap when reaching the begin/end of the list\n     * @return {qx.ui.menu.Button} Any menu button or <code>null</code>\n     */\n    _getChild(menu, start, iter, loop) {\n      var children = menu.getChildren();\n      var length = children.length;\n      var child;\n\n      for (var i = start; i < length && i >= 0; i += iter) {\n        child = children[i];\n        if (child.isEnabled() && !child.isAnonymous() && child.isVisible()) {\n          return child;\n        }\n      }\n\n      if (loop) {\n        i = i == length ? 0 : length - 1;\n        for (; i != start; i += iter) {\n          child = children[i];\n          if (child.isEnabled() && !child.isAnonymous() && child.isVisible()) {\n            return child;\n          }\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Whether the given widget is inside any Menu instance.\n     *\n     * @param widget {qx.ui.core.Widget} Any widget\n     * @return {Boolean} <code>true</code> when the widget is part of any menu\n     */\n    _isInMenu(widget) {\n      while (widget) {\n        if (widget instanceof qx.ui.menu.Menu) {\n          return true;\n        }\n\n        widget = widget.getLayoutParent();\n      }\n\n      return false;\n    },\n\n    /**\n     * Whether the given widget is one of the menu openers.\n     *\n     * @param widget {qx.ui.core.Widget} Any widget\n     * @return {Boolean} <code>true</code> if the widget is a menu opener\n     */\n    _isMenuOpener(widget) {\n      var menus = this.__objects;\n\n      for (var i = 0; i < menus.length; i++) {\n        if (menus[i].getOpener() === widget) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Returns an instance of a menu button if the given widget is a child\n     *\n     * @param widget {qx.ui.core.Widget} any widget\n     * @return {qx.ui.menu.Button} Any menu button instance or <code>null</code>\n     */\n    _getMenuButton(widget) {\n      while (widget) {\n        if (widget instanceof qx.ui.menu.AbstractButton) {\n          return widget;\n        }\n\n        widget = widget.getLayoutParent();\n      }\n\n      return null;\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      PUBLIC METHODS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Adds a menu to the list of visible menus.\n     *\n     * @param obj {qx.ui.menu.Menu} Any menu instance.\n     */\n    add(obj) {\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        if (!(obj instanceof qx.ui.menu.Menu)) {\n          throw new Error(\"Object is no menu: \" + obj);\n        }\n      }\n\n      var reg = this.__objects;\n      reg.push(obj);\n      obj.setZIndex(1e6 + reg.length);\n    },\n\n    /**\n     * Remove a menu from the list of visible menus.\n     *\n     * @param obj {qx.ui.menu.Menu} Any menu instance.\n     */\n    remove(obj) {\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        if (!(obj instanceof qx.ui.menu.Menu)) {\n          throw new Error(\"Object is no menu: \" + obj);\n        }\n      }\n\n      var reg = this.__objects;\n      if (reg) {\n        qx.lang.Array.remove(reg, obj);\n      }\n    },\n\n    /**\n     * Hides all currently opened menus.\n     */\n    hideAll() {\n      var reg = this.__objects;\n      if (reg) {\n        for (var i = reg.length - 1; i >= 0; i--) {\n          reg[i].exclude();\n        }\n      }\n    },\n\n    /**\n     * Returns the menu which was opened at last (which\n     * is the active one this way)\n     *\n     * @return {qx.ui.menu.Menu} The current active menu or <code>null</code>\n     */\n    getActiveMenu() {\n      var reg = this.__objects;\n      return reg.length > 0 ? reg[reg.length - 1] : null;\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      SCHEDULED OPEN/CLOSE SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Schedules the given menu to be opened after the\n     * {@link qx.ui.menu.Menu#openInterval} configured by the\n     * menu instance itself.\n     *\n     * @param menu {qx.ui.menu.Menu} The menu to schedule for open\n     */\n    scheduleOpen(menu) {\n      // Cancel close of given menu first\n      this.cancelClose(menu);\n\n      // When the menu is already visible\n      if (menu.isVisible()) {\n        // Cancel all other open requests\n        if (this.__scheduleOpen) {\n          this.cancelOpen(this.__scheduleOpen);\n        }\n      }\n\n      // When the menu is not visible and not scheduled already\n      // then schedule it for opening\n      else if (this.__scheduleOpen != menu) {\n        // menu.debug(\"Schedule open\");\n        this.__scheduleOpen = menu;\n        this.__openTimer.restartWith(menu.getOpenInterval());\n      }\n    },\n\n    /**\n     * Schedules the given menu to be closed after the\n     * {@link qx.ui.menu.Menu#closeInterval} configured by the\n     * menu instance itself.\n     *\n     * @param menu {qx.ui.menu.Menu} The menu to schedule for close\n     */\n    scheduleClose(menu) {\n      // Cancel open of the menu first\n      this.cancelOpen(menu);\n\n      // When the menu is already invisible\n      if (!menu.isVisible()) {\n        // Cancel all other close requests\n        if (this.__scheduleClose) {\n          this.cancelClose(this.__scheduleClose);\n        }\n      }\n\n      // When the menu is visible and not scheduled already\n      // then schedule it for closing\n      else if (this.__scheduleClose != menu) {\n        // menu.debug(\"Schedule close\");\n        this.__scheduleClose = menu;\n        this.__closeTimer.restartWith(menu.getCloseInterval());\n      }\n    },\n\n    /**\n     * When the given menu is scheduled for open this pending\n     * request is canceled.\n     *\n     * @param menu {qx.ui.menu.Menu} The menu to cancel for open\n     */\n    cancelOpen(menu) {\n      if (this.__scheduleOpen == menu) {\n        // menu.debug(\"Cancel open\");\n        this.__openTimer.stop();\n        this.__scheduleOpen = null;\n      }\n    },\n\n    /**\n     * When the given menu is scheduled for close this pending\n     * request is canceled.\n     *\n     * @param menu {qx.ui.menu.Menu} The menu to cancel for close\n     */\n    cancelClose(menu) {\n      if (this.__scheduleClose == menu) {\n        // menu.debug(\"Cancel close\");\n        this.__closeTimer.stop();\n        this.__scheduleClose = null;\n      }\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      TIMER EVENT HANDLERS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Event listener for a pending open request. Configured to the interval\n     * of the current menu to open.\n     *\n     * @param e {qx.event.type.Event} Interval event\n     */\n    _onOpenInterval(e) {\n      // Stop timer\n      this.__openTimer.stop();\n\n      // Open menu and reset flag\n      this.__scheduleOpen.open();\n      this.__scheduleOpen = null;\n    },\n\n    /**\n     * Event listener for a pending close request. Configured to the interval\n     * of the current menu to close.\n     *\n     * @param e {qx.event.type.Event} Interval event\n     */\n    _onCloseInterval(e) {\n      // Stop timer, reset scheduling flag\n      this.__closeTimer.stop();\n\n      // Close menu and reset flag\n      this.__scheduleClose.exclude();\n      this.__scheduleClose = null;\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      CONTEXTMENU EVENT HANDLING\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Internal function registers a handler to stop next\n     * <code>contextmenu</code> event.\n     * This function will be called by {@link qx.ui.menu.Button#_onTap}, if\n     * right click was pressed.\n     *\n     * @internal\n     */\n    preventContextMenuOnce() {\n      qx.event.Registration.addListener(\n        document.body,\n        \"contextmenu\",\n        this.__onPreventContextMenu,\n        this,\n        true\n      );\n    },\n\n    /**\n     * Internal event handler to stop <code>contextmenu</code> event bubbling,\n     * if target is inside the opened menu.\n     *\n     * @param e {qx.event.type.Mouse} contextmenu event\n     *\n     * @internal\n     */\n    __onPreventContextMenu(e) {\n      var target = e.getTarget();\n      target = qx.ui.core.Widget.getWidgetByElement(target, true);\n      if (this._isInMenu(target)) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n\n      // stop only once\n      qx.event.Registration.removeListener(\n        document.body,\n        \"contextmenu\",\n        this.__onPreventContextMenu,\n        this,\n        true\n      );\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      POINTER EVENT HANDLERS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Event handler for pointerdown events\n     *\n     * @param e {qx.event.type.Pointer} pointerdown event\n     */\n    _onPointerDown(e) {\n      var target = e.getTarget();\n      target = qx.ui.core.Widget.getWidgetByElement(target, true);\n\n      // If the target is 'null' the tap appears on a DOM element witch is not\n      // a widget. This happens normally with an inline application, when the user\n      // taps not in the inline application. In this case all all currently\n      // open menus should be closed.\n      if (target == null) {\n        this.hideAll();\n        return;\n      }\n\n      // If the target is the one which has opened the current menu\n      // we ignore the pointerdown to let the button process the event\n      // further with toggling or ignoring the tap.\n      if (target.getMenu && target.getMenu() && target.getMenu().isVisible()) {\n        return;\n      }\n\n      // All taps not inside a menu will hide all currently open menus\n      if (this.__objects.length > 0 && !this._isInMenu(target)) {\n        this.hideAll();\n      }\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      KEY EVENT HANDLING\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * @type {Map} Map of all keys working on an active menu selection\n     * @lint ignoreReferenceField(__selectionKeys)\n     */\n    __selectionKeys: {\n      Enter: 1,\n      Space: 1\n    },\n\n    /**\n     * @type {Map} Map of all keys working without a selection\n     * @lint ignoreReferenceField(__navigationKeys)\n     */\n    __navigationKeys: {\n      Tab: 1,\n      Escape: 1,\n      Up: 1,\n      Down: 1,\n      Left: 1,\n      Right: 1\n    },\n\n    /**\n     * Event handler for all keyup/keydown events. Stops all events\n     * when any menu is opened.\n     *\n     * @param e {qx.event.type.KeySequence} Keyboard event\n     */\n    _onKeyUpDown(e) {\n      var menu = this.getActiveMenu();\n      if (!menu) {\n        return;\n      }\n\n      // Stop for all supported key combos\n      var iden = e.getKeyIdentifier();\n      if (\n        this.__navigationKeys[iden] ||\n        (this.__selectionKeys[iden] && menu.getSelectedButton())\n      ) {\n        e.stopPropagation();\n      }\n    },\n\n    /**\n     * Event handler for all keypress events. Delegates the event to the more\n     * specific methods defined in this class.\n     *\n     * Currently processes the keys: <code>Up</code>, <code>Down</code>,\n     * <code>Left</code>, <code>Right</code> and <code>Enter</code>.\n     *\n     * @param e {qx.event.type.KeySequence} Keyboard event\n     */\n    _onKeyPress(e) {\n      var menu = this.getActiveMenu();\n      if (!menu) {\n        return;\n      }\n\n      var iden = e.getKeyIdentifier();\n      var navigation = this.__navigationKeys[iden];\n      var selection = this.__selectionKeys[iden];\n\n      if (navigation) {\n        switch (iden) {\n          case \"Up\":\n            this._onKeyPressUp(menu);\n            break;\n\n          case \"Down\":\n            this._onKeyPressDown(menu);\n            break;\n\n          case \"Left\":\n            this._onKeyPressLeft(menu);\n            break;\n\n          case \"Right\":\n            this._onKeyPressRight(menu);\n            break;\n\n          case \"Tab\":\n          case \"Escape\":\n            this.hideAll();\n            break;\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n      } else if (selection) {\n        // Do not process these events when no item is hovered\n        var button = menu.getSelectedButton();\n        if (button) {\n          switch (iden) {\n            case \"Enter\":\n              this._onKeyPressEnter(menu, button, e);\n              break;\n\n            case \"Space\":\n              this._onKeyPressSpace(menu, button, e);\n              break;\n          }\n\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }\n    },\n\n    /**\n     * Event handler for <code>Up</code> key\n     *\n     * @param menu {qx.ui.menu.Menu} The active menu\n     */\n    _onKeyPressUp(menu) {\n      // Query for previous child\n      var selectedButton = menu.getSelectedButton();\n      var children = menu.getChildren();\n      var start = selectedButton\n        ? menu.indexOf(selectedButton) - 1\n        : children.length - 1;\n      var nextItem = this._getChild(menu, start, -1, true);\n\n      // Reconfigure property\n      if (nextItem) {\n        menu.setSelectedButton(nextItem);\n      } else {\n        menu.resetSelectedButton();\n      }\n    },\n\n    /**\n     * Event handler for <code>Down</code> key\n     *\n     * @param menu {qx.ui.menu.Menu} The active menu\n     */\n    _onKeyPressDown(menu) {\n      // Query for next child\n      var selectedButton = menu.getSelectedButton();\n      var start = selectedButton ? menu.indexOf(selectedButton) + 1 : 0;\n      var nextItem = this._getChild(menu, start, 1, true);\n\n      // Reconfigure property\n      if (nextItem) {\n        menu.setSelectedButton(nextItem);\n      } else {\n        menu.resetSelectedButton();\n      }\n    },\n\n    /**\n     * Event handler for <code>Left</code> key\n     *\n     * @param menu {qx.ui.menu.Menu} The active menu\n     */\n    _onKeyPressLeft(menu) {\n      var menuOpener = menu.getOpener();\n      if (!menuOpener) {\n        return;\n      }\n\n      // Back to the \"parent\" menu\n      if (menuOpener instanceof qx.ui.menu.AbstractButton) {\n        var parentMenu = menuOpener.getLayoutParent();\n\n        parentMenu.resetOpenedButton();\n        parentMenu.setSelectedButton(menuOpener);\n      }\n\n      // Goto the previous toolbar button\n      else if (menuOpener instanceof qx.ui.menubar.Button) {\n        var buttons = menuOpener.getMenuBar().getMenuButtons();\n        var index = buttons.indexOf(menuOpener);\n\n        // This should not happen, definitely!\n        if (index === -1) {\n          return;\n        }\n\n        // Get previous button, fallback to end if first arrived\n        var prevButton = null;\n        var length = buttons.length;\n        for (var i = 1; i <= length; i++) {\n          var button = buttons[(index - i + length) % length];\n          if (button.isEnabled() && button.isVisible()) {\n            prevButton = button;\n            break;\n          }\n        }\n\n        if (prevButton && prevButton != menuOpener) {\n          prevButton.open(true);\n        }\n      }\n    },\n\n    /**\n     * Event handler for <code>Right</code> key\n     *\n     * @param menu {qx.ui.menu.Menu} The active menu\n     */\n    _onKeyPressRight(menu) {\n      var selectedButton = menu.getSelectedButton();\n\n      // Open sub-menu of hovered item and select first child\n      if (selectedButton) {\n        var subMenu = selectedButton.getMenu();\n\n        if (subMenu) {\n          // Open previously hovered item\n          menu.setOpenedButton(selectedButton);\n\n          // Hover first item in new submenu\n          var first = this._getChild(subMenu, 0, 1);\n          if (first) {\n            subMenu.setSelectedButton(first);\n          }\n\n          return;\n        }\n      }\n\n      // No hover and no open item\n      // When first button has a menu, open it, otherwise only hover it\n      else if (!menu.getOpenedButton()) {\n        var first = this._getChild(menu, 0, 1);\n\n        if (first) {\n          menu.setSelectedButton(first);\n\n          if (first.getMenu()) {\n            menu.setOpenedButton(first);\n          }\n\n          return;\n        }\n      }\n\n      // Jump to the next toolbar button\n      var menuOpener = menu.getOpener();\n\n      // Look up opener hierarchy for menu button\n      if (menuOpener instanceof qx.ui.menu.Button && selectedButton) {\n        // From one inner selected button try to find the top level\n        // menu button which has opened the whole menu chain.\n        while (menuOpener) {\n          menuOpener = menuOpener.getLayoutParent();\n          if (menuOpener instanceof qx.ui.menu.Menu) {\n            menuOpener = menuOpener.getOpener();\n            if (menuOpener instanceof qx.ui.menubar.Button) {\n              break;\n            }\n          } else {\n            break;\n          }\n        }\n\n        if (!menuOpener) {\n          return;\n        }\n      }\n\n      // Ask the toolbar for the next menu button\n      if (menuOpener instanceof qx.ui.menubar.Button) {\n        var buttons = menuOpener.getMenuBar().getMenuButtons();\n        var index = buttons.indexOf(menuOpener);\n\n        // This should not happen, definitely!\n        if (index === -1) {\n          return;\n        }\n\n        // Get next button, fallback to first if end arrived\n        var nextButton = null;\n        var length = buttons.length;\n        for (var i = 1; i <= length; i++) {\n          var button = buttons[(index + i) % length];\n          if (button.isEnabled() && button.isVisible()) {\n            nextButton = button;\n            break;\n          }\n        }\n\n        if (nextButton && nextButton != menuOpener) {\n          nextButton.open(true);\n        }\n      }\n    },\n\n    /**\n     * Event handler for <code>Enter</code> key\n     *\n     * @param menu {qx.ui.menu.Menu} The active menu\n     * @param button {qx.ui.menu.AbstractButton} The selected button\n     * @param e {qx.event.type.KeySequence} The keypress event\n     */\n    _onKeyPressEnter(menu, button, e) {\n      // Route keypress event to the selected button\n      if (button.hasListener(\"keypress\")) {\n        // Clone and reconfigure event\n        var clone = e.clone();\n        clone.setBubbles(false);\n        clone.setTarget(button);\n\n        // Finally dispatch the clone\n        button.dispatchEvent(clone);\n      }\n\n      // Hide all open menus\n      this.hideAll();\n    },\n\n    /**\n     * Event handler for <code>Space</code> key\n     *\n     * @param menu {qx.ui.menu.Menu} The active menu\n     * @param button {qx.ui.menu.AbstractButton} The selected button\n     * @param e {qx.event.type.KeySequence} The keypress event\n     */\n    _onKeyPressSpace(menu, button, e) {\n      // Route keypress event to the selected button\n      if (button.hasListener(\"keypress\")) {\n        // Clone and reconfigure event\n        var clone = e.clone();\n        clone.setBubbles(false);\n        clone.setTarget(button);\n\n        // Finally dispatch the clone\n        button.dispatchEvent(clone);\n      }\n    },\n\n    /**\n     * Event handler for roll which hides all windows on scroll.\n     *\n     * @param e {qx.event.type.Roll} The roll event.\n     */\n    _onRoll(e) {\n      var target = e.getTarget();\n      target = qx.ui.core.Widget.getWidgetByElement(target, true);\n\n      if (\n        this.__objects.length > 0 &&\n        !this._isInMenu(target) &&\n        !this._isMenuOpener(target) &&\n        !e.getMomentum()\n      ) {\n        this.hideAll();\n      }\n    }\n  },\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct() {\n    var Registration = qx.event.Registration;\n    var el = document.body;\n\n    // React on pointerdown events\n    Registration.removeListener(\n      window.document.documentElement,\n      \"pointerdown\",\n      this._onPointerDown,\n      this,\n      true\n    );\n\n    // React on keypress events\n    Registration.removeListener(el, \"keydown\", this._onKeyUpDown, this, true);\n    Registration.removeListener(el, \"keyup\", this._onKeyUpDown, this, true);\n    Registration.removeListener(el, \"keypress\", this._onKeyPress, this, true);\n\n    this._disposeObjects(\"__openTimer\", \"__closeTimer\");\n    this._disposeArray(\"__objects\");\n  }\n});\n"
  ]
}