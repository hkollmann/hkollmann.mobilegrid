{
  "version": 3,
  "sources": [
    "/home/runner/work/hkollmann.mobilegrid/hkollmann.mobilegrid/node_modules/@qooxdoo/framework/source/class/qx/ui/basic/Image.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "core",
    "Widget",
    "construct",
    "source",
    "__contentElements",
    "setSource",
    "properties",
    "check",
    "init",
    "nullable",
    "event",
    "apply",
    "themeable",
    "scale",
    "forceRatio",
    "allowScaleUp",
    "appearance",
    "refine",
    "allowShrinkX",
    "allowShrinkY",
    "allowGrowX",
    "allowGrowY",
    "events",
    "loadingFailed",
    "loaded",
    "aborted",
    "statics",
    "PLACEHOLDER_IMAGE",
    "members",
    "__width",
    "__height",
    "__mode",
    "__currentContentElement",
    "__wrapper",
    "__requestId",
    "_onChangeTheme",
    "_styleSource",
    "getContentElement",
    "__getSuitableContentElement",
    "_createContentElement",
    "_getContentHint",
    "width",
    "height",
    "_applyDecorator",
    "value",
    "old",
    "getSource",
    "util",
    "AliasManager",
    "getInstance",
    "resolve",
    "el",
    "getChild",
    "__setSource",
    "_applyTextColor",
    "__getMode",
    "setStyle",
    "theme",
    "manager",
    "Color",
    "removeStyle",
    "_applyPadding",
    "name",
    "element",
    "setStyles",
    "top",
    "getPaddingTop",
    "left",
    "getPaddingLeft",
    "setPadding",
    "renderLayout",
    "getPaddingRight",
    "getPaddingBottom",
    "_applyEnabled",
    "_applySource",
    "io",
    "ImageLoader",
    "isLoading",
    "abort",
    "_applyScale",
    "__setMode",
    "mode",
    "lang",
    "String",
    "startsWith",
    "isPng",
    "endsWith",
    "getScale",
    "Environment",
    "get",
    "__createSuitableContentElement",
    "tagName",
    "clazz",
    "html",
    "Image",
    "Label",
    "connectObject",
    "overflowX",
    "overflowY",
    "boxSizing",
    "setRich",
    "setScale",
    "wrapper",
    "Element",
    "add",
    "$$disposed",
    "ResourceManager",
    "__resetSource",
    "__checkForContentElementSwitch",
    "parseInt",
    "repeat",
    "tagNameHint",
    "bom",
    "Decoration",
    "getTagName",
    "contentEl",
    "__getContentElement",
    "isFontUri",
    "__setManagedImage",
    "color",
    "getTextColor",
    "Type",
    "isString",
    "has",
    "highResolutionSource",
    "findHighResolutionSource",
    "imageWidth",
    "getImageWidth",
    "imageHeight",
    "getImageHeight",
    "setWidth",
    "setHeight",
    "backgroundSize",
    "__fireLoadEvent",
    "isLoaded",
    "__setUnmanagedImage",
    "__loadUnmanagedImage",
    "AnimationFrame",
    "request",
    "rId",
    "fireEvent",
    "bind",
    "select",
    "mshtml",
    "alphaImageLoader",
    "isFont",
    "__checkForContentElementReplacement",
    "elementToAdd",
    "currentContentElement",
    "pixel",
    "styles",
    "currentStyles",
    "getAllStyles",
    "prop",
    "backgroundImage",
    "bounds",
    "getBounds",
    "insets",
    "getInsets",
    "getStyle",
    "zIndex",
    "newEl",
    "setSelectable",
    "getSelectable",
    "isVisible",
    "hide",
    "show",
    "isIncluded",
    "exclude",
    "include",
    "container",
    "getParent",
    "index",
    "getChildren",
    "indexOf",
    "removeAt",
    "addAt",
    "hint",
    "getNodeName",
    "setValue",
    "currentEl",
    "setAttribute",
    "getAttribute",
    "flush",
    "currentDomEl",
    "getDomElement",
    "newDomEl",
    "listeners",
    "getListeners",
    "forEach",
    "listenerData",
    "addListener",
    "type",
    "handler",
    "self",
    "capture",
    "currentHash",
    "$$hash",
    "getEnabled",
    "disabled",
    "replace",
    "addState",
    "removeState",
    "split",
    "getSizeHint",
    "getWidth",
    "getHeight",
    "font",
    "__getFont",
    "size",
    "getSize",
    "__updateContentHint",
    "__setFontSize",
    "sparts",
    "_applyDimension",
    "isFailed",
    "load",
    "__loaderCallback",
    "resetSource",
    "resetValue",
    "Font",
    "match",
    "Error",
    "fontStyles",
    "Object",
    "clone",
    "getStyles",
    "charCode",
    "fromFontUriToCharCode",
    "fromCharCode",
    "decorator",
    "getDecorator",
    "hasGradient",
    "getStartColor",
    "getEndColor",
    "hasBackground",
    "getBackgroundImage",
    "attr",
    "getAttributes",
    "decoratorStyle",
    "combinedStyles",
    "style",
    "backgroundPosition",
    "backgroundRepeat",
    "position",
    "getBackgroundRepeat",
    "imageInfo",
    "failed",
    "warn",
    "undefined",
    "_recalc",
    "queue",
    "Layout",
    "originalWidth",
    "originalHeight",
    "maxWidth",
    "getMaxWidth",
    "maxHeight",
    "getMaxHeight",
    "minWidth",
    "getMinWidth",
    "minHeight",
    "getMinHeight",
    "ratio",
    "getForceRatio",
    "isAllowScaleUp",
    "Math",
    "round",
    "destruct",
    "hasOwnProperty",
    "disconnectObject",
    "_disposeMap",
    "basic"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Sebastian Werner (wpbasti)\n\n************************************************************************ */\n\n/**\n * The image class displays an image file\n *\n * This class supports image clipping, which means that multiple images can be combined\n * into one large image and only the relevant part is shown.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   var image = new qx.ui.basic.Image(\"icon/32/actions/format-justify-left.png\");\n *\n *   this.getRoot().add(image);\n * </pre>\n *\n * This example create a widget to display the image\n * <code>icon/32/actions/format-justify-left.png</code>.\n *\n * *External Documentation*\n *\n * <a href='http://qooxdoo.org/docs/#desktop/widget/image.md' target='_blank'>\n * Documentation of this widget in the qooxdoo manual.</a>\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n */\nqx.Class.define(\"qx.ui.basic.Image\", {\n  extend: qx.ui.core.Widget,\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param source {String?null} The URL of the image to display.\n   */\n  construct(source) {\n    this.__contentElements = {};\n\n    super();\n\n    if (source) {\n      this.setSource(source);\n    }\n  },\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties: {\n    /** The URL of the image. Setting it will possibly abort loading of current image. */\n    source: {\n      check: \"String\",\n      init: null,\n      nullable: true,\n      event: \"changeSource\",\n      apply: \"_applySource\",\n      themeable: true\n    },\n\n    /**\n     * Whether the image should be scaled to the given dimensions\n     *\n     * This is disabled by default because it prevents the usage\n     * of image clipping when enabled.\n     */\n    scale: {\n      check: \"Boolean\",\n      init: false,\n      event: \"changeScale\",\n      themeable: true,\n      apply: \"_applyScale\"\n    },\n\n    /**\n     * Whether to preserve the image ratio (ie prevent distortion), and which dimension\n     * to prioritise\n     */\n    forceRatio: {\n      init: \"auto\",\n      check: [\"disabled\", \"height\", \"width\", \"auto\"],\n      apply: \"_applyDimension\"\n    },\n\n    /**\n     * Whether to allow scaling the image up\n     */\n    allowScaleUp: {\n      init: false,\n      check: \"Boolean\",\n      apply: \"_applyDimension\"\n    },\n\n    // overridden\n    appearance: {\n      refine: true,\n      init: \"image\"\n    },\n\n    // overridden\n    allowShrinkX: {\n      refine: true,\n      init: false\n    },\n\n    // overridden\n    allowShrinkY: {\n      refine: true,\n      init: false\n    },\n\n    // overridden\n    allowGrowX: {\n      refine: true,\n      init: false\n    },\n\n    // overridden\n    allowGrowY: {\n      refine: true,\n      init: false\n    }\n  },\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events: {\n    /**\n     * Fired if the image source can not be loaded. This event can only be\n     * fired for the first loading of an unmanaged resource (external image).\n     */\n    loadingFailed: \"qx.event.type.Event\",\n\n    /**\n     * Fired if the image has been loaded. This is even true for managed\n     * resources (images known by generator).\n     */\n    loaded: \"qx.event.type.Event\",\n\n    /** Fired when the pending request has been aborted. */\n    aborted: \"qx.event.type.Event\"\n  },\n\n  statics: {\n    PLACEHOLDER_IMAGE:\n      \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n  },\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members: {\n    __width: null,\n    __height: null,\n    __mode: null,\n    __contentElements: null,\n    __currentContentElement: null,\n    __wrapper: null,\n    __requestId: 0,\n\n    // overridden\n    _onChangeTheme() {\n      super._onChangeTheme();\n      // restyle source (theme change might have changed the resolved url)\n      this._styleSource();\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      WIDGET API\n    ---------------------------------------------------------------------------\n    */\n\n    // overridden\n    getContentElement() {\n      return this.__getSuitableContentElement();\n    },\n\n    // overridden\n    _createContentElement() {\n      return this.__getSuitableContentElement();\n    },\n\n    // overridden\n    _getContentHint() {\n      return {\n        width: this.__width || 0,\n        height: this.__height || 0\n      };\n    },\n\n    // overridden\n    _applyDecorator(value, old) {\n      super._applyDecorator(value, old);\n\n      var source = this.getSource();\n      source = qx.util.AliasManager.getInstance().resolve(source);\n      var el = this.getContentElement();\n      if (this.__wrapper) {\n        el = el.getChild(0);\n      }\n      this.__setSource(el, source);\n    },\n\n    // overridden\n    _applyTextColor(value) {\n      if (this.__getMode() === \"font\") {\n        var el = this.getContentElement();\n        if (this.__wrapper) {\n          el = el.getChild(0);\n        }\n\n        if (value) {\n          el.setStyle(\n            \"color\",\n            qx.theme.manager.Color.getInstance().resolve(value)\n          );\n        } else {\n          el.removeStyle(\"color\");\n        }\n      }\n    },\n\n    // overridden\n    _applyPadding(value, old, name) {\n      super._applyPadding(value, old, name);\n\n      var element = this.getContentElement();\n      if (this.__wrapper) {\n        element.getChild(0).setStyles({\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      } else if (this.__getMode() === \"font\") {\n        element.setStyles({\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      } else {\n        element.setPadding(\n          this.getPaddingLeft() || 0,\n          this.getPaddingTop() || 0\n        );\n      }\n    },\n\n    renderLayout(left, top, width, height) {\n      super.renderLayout(left, top, width, height);\n\n      var element = this.getContentElement();\n      if (this.__wrapper) {\n        element.getChild(0).setStyles({\n          width:\n            width -\n            (this.getPaddingLeft() || 0) -\n            (this.getPaddingRight() || 0),\n          height:\n            height -\n            (this.getPaddingTop() || 0) -\n            (this.getPaddingBottom() || 0),\n          top: this.getPaddingTop() || 0,\n          left: this.getPaddingLeft() || 0\n        });\n      }\n    },\n\n    /*\n    ---------------------------------------------------------------------------\n      IMAGE API\n    ---------------------------------------------------------------------------\n    */\n\n    // property apply, overridden\n    _applyEnabled(value, old) {\n      super._applyEnabled(value, old);\n\n      if (this.getSource()) {\n        this._styleSource();\n      }\n    },\n\n    // property apply\n    _applySource(value, old) {\n      // abort loading current image\n      if (old) {\n        if (qx.io.ImageLoader.isLoading(old)) {\n          qx.io.ImageLoader.abort(old);\n        }\n      }\n\n      this._styleSource();\n    },\n\n    // property apply\n    _applyScale(value) {\n      this._styleSource();\n    },\n\n    /**\n     * Remembers the mode to keep track which contentElement is currently in use.\n     * @param mode {String} internal mode (alphaScaled|scaled|nonScaled)\n     */\n    __setMode(mode) {\n      this.__mode = mode;\n    },\n\n    /**\n     * Returns the current mode if set. Otherwise checks the current source and\n     * the current scaling to determine the current mode.\n     *\n     * @return {String} current internal mode\n     */\n    __getMode() {\n      if (this.__mode == null) {\n        var source = this.getSource();\n\n        if (source && qx.lang.String.startsWith(source, \"@\")) {\n          this.__mode = \"font\";\n        }\n\n        var isPng = false;\n        if (source != null) {\n          isPng = source.endsWith(\".png\");\n        }\n\n        if (\n          this.getScale() &&\n          isPng &&\n          qx.core.Environment.get(\"css.alphaimageloaderneeded\")\n        ) {\n          this.__mode = \"alphaScaled\";\n        } else if (this.getScale()) {\n          this.__mode = \"scaled\";\n        } else {\n          this.__mode = \"nonScaled\";\n        }\n      }\n\n      return this.__mode;\n    },\n\n    /**\n     * Creates a contentElement suitable for the current mode\n     *\n     * @param mode {String} internal mode\n     * @return {qx.html.Image} suitable image content element\n     */\n    __createSuitableContentElement(mode) {\n      var scale;\n      var tagName;\n      var clazz = qx.html.Image;\n\n      switch (mode) {\n        case \"font\":\n          clazz = qx.html.Label;\n          scale = true;\n          tagName = \"div\";\n          break;\n        case \"alphaScaled\":\n          scale = true;\n          tagName = \"div\";\n          break;\n        case \"nonScaled\":\n          scale = false;\n          tagName = \"div\";\n          break;\n        default:\n          scale = true;\n          tagName = \"img\";\n          break;\n      }\n\n      var element = new clazz(tagName);\n      element.connectObject(this);\n      element.setStyles({\n        overflowX: \"hidden\",\n        overflowY: \"hidden\",\n        boxSizing: \"border-box\"\n      });\n\n      if (mode == \"font\") {\n        element.setRich(true);\n      } else {\n        element.setScale(scale);\n\n        if (qx.core.Environment.get(\"css.alphaimageloaderneeded\")) {\n          var wrapper = (this.__wrapper = new qx.html.Element(\"div\"));\n          element.connectObject(this);\n          wrapper.setStyle(\"position\", \"absolute\");\n          wrapper.add(element);\n          return wrapper;\n        }\n      }\n\n      return element;\n    },\n\n    /**\n     * Returns a contentElement suitable for the current mode\n     *\n     * @return {qx.html.Image} suitable image contentElement\n     */\n    __getSuitableContentElement() {\n      if (this.$$disposed) {\n        return null;\n      }\n\n      var mode = this.__getMode();\n\n      if (this.__contentElements[mode] == null) {\n        this.__contentElements[mode] =\n          this.__createSuitableContentElement(mode);\n      }\n\n      var element = this.__contentElements[mode];\n\n      if (!this.__currentContentElement) {\n        this.__currentContentElement = element;\n      }\n\n      return element;\n    },\n\n    /**\n     * Applies the source to the clipped image instance or preload\n     * an image to detect sizes and apply it afterwards.\n     *\n     */\n    _styleSource() {\n      var AliasManager = qx.util.AliasManager.getInstance();\n      var ResourceManager = qx.util.ResourceManager.getInstance();\n\n      var source = AliasManager.resolve(this.getSource());\n\n      var element = this.getContentElement();\n      if (this.__wrapper) {\n        element = element.getChild(0);\n      }\n\n      if (!source) {\n        this.__resetSource(element);\n        return;\n      }\n\n      this.__checkForContentElementSwitch(source);\n\n      if (\n        qx.core.Environment.get(\"engine.name\") == \"mshtml\" &&\n        (parseInt(qx.core.Environment.get(\"engine.version\"), 10) < 9 ||\n          qx.core.Environment.get(\"browser.documentmode\") < 9)\n      ) {\n        var repeat = this.getScale() ? \"scale\" : \"no-repeat\";\n        element.tagNameHint = qx.bom.element.Decoration.getTagName(\n          repeat,\n          source\n        );\n      }\n\n      var contentEl = this.__getContentElement();\n\n      // Detect if the image registry knows this image\n      if (ResourceManager.isFontUri(source)) {\n        this.__setManagedImage(contentEl, source);\n        var color = this.getTextColor();\n        if (qx.lang.Type.isString(color)) {\n          this._applyTextColor(color, null);\n        }\n      } else if (ResourceManager.has(source)) {\n        var highResolutionSource =\n          ResourceManager.findHighResolutionSource(source);\n        if (highResolutionSource) {\n          var imageWidth = ResourceManager.getImageWidth(source);\n          var imageHeight = ResourceManager.getImageHeight(source);\n          this.setWidth(imageWidth);\n          this.setHeight(imageHeight);\n\n          // set background size on current element (div or img)\n          var backgroundSize = imageWidth + \"px, \" + imageHeight + \"px\";\n          this.__currentContentElement.setStyle(\n            \"background-size\",\n            backgroundSize\n          );\n\n          this.setSource(highResolutionSource);\n          source = highResolutionSource;\n        }\n        this.__setManagedImage(contentEl, source);\n        this.__fireLoadEvent();\n      } else if (qx.io.ImageLoader.isLoaded(source)) {\n        this.__setUnmanagedImage(contentEl, source);\n        this.__fireLoadEvent();\n      } else {\n        this.__loadUnmanagedImage(contentEl, source);\n      }\n    },\n\n    /**\n     * Helper function, which fires <code>loaded</code> event asynchronously.\n     * It emulates native <code>loaded</code> event of an image object. This\n     * helper will be called, if you try to load a managed image or an\n     * previously loaded unmanaged image.\n     */\n    __fireLoadEvent() {\n      this.__requestId++;\n      qx.bom.AnimationFrame.request(\n        function (rId) {\n          // prevent firing of the event if source changed in the meantime\n          if (rId === this.__requestId) {\n            this.fireEvent(\"loaded\");\n          } else {\n            this.fireEvent(\"aborted\");\n          }\n        }.bind(this, this.__requestId)\n      );\n    },\n\n    /**\n     * Returns the content element.\n     * @return {qx.html.Image} content element\n     */\n    __getContentElement() {\n      var contentEl = this.__currentContentElement;\n      if (this.__wrapper) {\n        contentEl = contentEl.getChild(0);\n      }\n\n      return contentEl;\n    },\n\n    /**\n     * Checks if the current content element is capable to display the image\n     * with the current settings (scaling, alpha PNG)\n     *\n     * @param source {String} source of the image\n     */\n    __checkForContentElementSwitch: qx.core.Environment.select(\"engine.name\", {\n      mshtml(source) {\n        var alphaImageLoader = qx.core.Environment.get(\n          \"css.alphaimageloaderneeded\"\n        );\n\n        var isPng = source.endsWith(\".png\");\n        var isFont = source.startsWith(\"@\");\n\n        if (isFont) {\n          this.__setMode(\"font\");\n        } else if (alphaImageLoader && isPng) {\n          if (this.getScale() && this.__getMode() != \"alphaScaled\") {\n            this.__setMode(\"alphaScaled\");\n          } else if (!this.getScale() && this.__getMode() != \"nonScaled\") {\n            this.__setMode(\"nonScaled\");\n          }\n        } else {\n          if (this.getScale() && this.__getMode() != \"scaled\") {\n            this.__setMode(\"scaled\");\n          } else if (!this.getScale() && this.__getMode() != \"nonScaled\") {\n            this.__setMode(\"nonScaled\");\n          }\n        }\n\n        this.__checkForContentElementReplacement(\n          this.__getSuitableContentElement()\n        );\n      },\n\n      default(source) {\n        var isFont = source && qx.lang.String.startsWith(source, \"@\");\n\n        if (isFont) {\n          this.__setMode(\"font\");\n        } else if (this.getScale() && this.__getMode() != \"scaled\") {\n          this.__setMode(\"scaled\");\n        } else if (!this.getScale() && this.__getMode() != \"nonScaled\") {\n          this.__setMode(\"nonScaled\");\n        }\n\n        this.__checkForContentElementReplacement(\n          this.__getSuitableContentElement()\n        );\n      }\n    }),\n\n    /**\n     * Checks the current child and replaces it if necessary\n     *\n     * @param elementToAdd {qx.html.Image} content element to add\n     */\n    __checkForContentElementReplacement(elementToAdd) {\n      var currentContentElement = this.__currentContentElement;\n\n      if (currentContentElement != elementToAdd) {\n        if (currentContentElement != null) {\n          var pixel = \"px\";\n          var styles = {};\n\n          //inherit styles from current element\n          var currentStyles = currentContentElement.getAllStyles();\n          if (currentStyles) {\n            for (var prop in currentStyles) {\n              styles[prop] = currentStyles[prop];\n            }\n          }\n\n          // Don't transfer background image when switching from image to icon font\n          if (this.__getMode() === \"font\") {\n            delete styles.backgroundImage;\n          }\n\n          // Copy dimension and location of the current content element\n          var bounds = this.getBounds();\n          if (bounds != null) {\n            styles.width = bounds.width + pixel;\n            styles.height = bounds.height + pixel;\n          }\n\n          var insets = this.getInsets();\n          styles.left =\n            parseInt(currentContentElement.getStyle(\"left\") || insets.left) +\n            pixel;\n          styles.top =\n            parseInt(currentContentElement.getStyle(\"top\") || insets.top) +\n            pixel;\n\n          styles.zIndex = 10;\n\n          var newEl = this.__wrapper ? elementToAdd.getChild(0) : elementToAdd;\n          newEl.setStyles(styles, true);\n          newEl.setSelectable(this.getSelectable());\n\n          if (!currentContentElement.isVisible()) {\n            elementToAdd.hide();\n          } else if (!elementToAdd.isVisible()) {\n            elementToAdd.show();\n          }\n\n          if (!currentContentElement.isIncluded()) {\n            elementToAdd.exclude();\n          } else if (!elementToAdd.isIncluded()) {\n            elementToAdd.include();\n          }\n\n          var container = currentContentElement.getParent();\n\n          if (container) {\n            var index = container.getChildren().indexOf(currentContentElement);\n            container.removeAt(index);\n            container.addAt(elementToAdd, index);\n          }\n          // force re-application of source so __setSource is called again\n          var hint = newEl.getNodeName();\n          if (newEl.setSource) {\n            newEl.setSource(null);\n          } else {\n            newEl.setValue(\"\");\n          }\n          var currentEl = this.__getContentElement();\n          newEl.tagNameHint = hint;\n          newEl.setAttribute(\"class\", currentEl.getAttribute(\"class\"));\n\n          // Flush elements to make sure the DOM elements are created.\n          qx.html.Element.flush();\n          var currentDomEl = currentEl.getDomElement();\n          var newDomEl = elementToAdd.getDomElement();\n\n          // copy event listeners\n          var listeners = currentContentElement.getListeners() || [];\n          listeners.forEach(function (listenerData) {\n            elementToAdd.addListener(\n              listenerData.type,\n              listenerData.handler,\n              listenerData.self,\n              listenerData.capture\n            );\n          });\n\n          if (currentDomEl && newDomEl) {\n            // Switch the DOM elements' hash codes. This is required for the event\n            // layer to work [BUG #7447]\n            var currentHash = currentDomEl.$$hash;\n            currentDomEl.$$hash = newDomEl.$$hash;\n            newDomEl.$$hash = currentHash;\n          }\n\n          this.__currentContentElement = elementToAdd;\n        }\n      }\n    },\n\n    /**\n     * Use the ResourceManager to set a managed image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setManagedImage(el, source) {\n      var ResourceManager = qx.util.ResourceManager.getInstance();\n      var isFont = ResourceManager.isFontUri(source);\n\n      // Try to find a disabled image in registry\n      if (!this.getEnabled()) {\n        var disabled = source.replace(/\\.([a-z]+)$/, \"-disabled.$1\");\n        if (!isFont && ResourceManager.has(disabled)) {\n          source = disabled;\n          this.addState(\"replacement\");\n        } else {\n          this.removeState(\"replacement\");\n        }\n      }\n\n      // Optimize case for enabled changes when no disabled image was found\n      if (!isFont && el.getSource() === source) {\n        return;\n      }\n\n      // Special case for non resource manager handled font icons\n      if (isFont) {\n        // Don't use scale if size is set via postfix\n        if (this.getScale() && parseInt(source.split(\"/\")[2], 10)) {\n          this.setScale(false);\n        }\n\n        // Adjust size if scaling is applied\n        var width;\n        var height;\n        if (this.getScale()) {\n          var hint = this.getSizeHint();\n          width = this.getWidth() || hint.width;\n          height = this.getHeight() || hint.height;\n        } else {\n          var font = this.__getFont(source);\n          var size = parseInt(source.split(\"/\")[2] || font.getSize(), 10);\n          width = ResourceManager.getImageWidth(source) || size;\n          height = ResourceManager.getImageHeight(source) || size;\n        }\n\n        this.__updateContentHint(width, height);\n        this.__setSource(el, source);\n\n        // Apply source\n      } else {\n        // Apply source\n        this.__setSource(el, source);\n\n        // Compare with old sizes and relayout if necessary\n        this.__updateContentHint(\n          ResourceManager.getImageWidth(source),\n          ResourceManager.getImageHeight(source)\n        );\n      }\n    },\n\n    __setFontSize(el, width, height) {\n      if (this.getScale()) {\n        el.setStyle(\"fontSize\", (width > height ? height : width) + \"px\");\n      } else {\n        var source = this.getSource();\n        var sparts = source.split(\"/\");\n        var font = this.__getFont(source);\n        var size = parseInt(sparts[2] || font.getSize());\n        el.setStyle(\"fontSize\", size + \"px\");\n      }\n    },\n\n    _applyDimension() {\n      super._applyDimension();\n\n      var isFont =\n        this.getSource() && qx.lang.String.startsWith(this.getSource(), \"@\");\n      if (isFont) {\n        var el = this.getContentElement();\n        if (el) {\n          var hint = this.getSizeHint();\n          var width = this.getWidth() || hint.width || 40;\n          var height = this.getHeight() || hint.height || 40;\n          this.__setFontSize(el, width, height);\n        }\n      } else {\n        this.__updateContentHint();\n      }\n    },\n\n    /**\n     * Use the infos of the ImageLoader to set an unmanaged image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setUnmanagedImage(el, source) {\n      var ImageLoader = qx.io.ImageLoader;\n\n      // Apply source\n      this.__setSource(el, source);\n\n      // Compare with old sizes and relayout if necessary\n      var width = ImageLoader.getWidth(source);\n      var height = ImageLoader.getHeight(source);\n      this.__updateContentHint(width, height);\n    },\n\n    /**\n     * Use the ImageLoader to load an unmanaged image\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __loadUnmanagedImage(el, source) {\n      var ImageLoader = qx.io.ImageLoader;\n\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        // loading external images via HTTP/HTTPS is a common usecase, as is\n        // using data URLs.\n        var sourceLC = source.toLowerCase();\n        if (\n          !sourceLC.startsWith(\"http\") &&\n          !sourceLC.startsWith(\"data:image/\")\n        ) {\n          var self = this.self(arguments);\n\n          if (!self.__warned) {\n            self.__warned = {};\n          }\n\n          if (!self.__warned[source]) {\n            this.debug(\"try to load an unmanaged relative image: \" + source);\n            self.__warned[source] = true;\n          }\n        }\n      }\n\n      // only try to load the image if it not already failed\n      if (!ImageLoader.isFailed(source)) {\n        ImageLoader.load(source, this.__loaderCallback, this);\n      } else {\n        this.__resetSource(el);\n      }\n    },\n\n    /**\n     * Reset source displayed by the DOM element.\n     *\n     * @param el {Element} image DOM element\n     */\n    __resetSource(el) {\n      if (el != null) {\n        if (el instanceof qx.html.Image) {\n          el.resetSource();\n        } else {\n          el.resetValue();\n        }\n      }\n    },\n\n    __getFont(source) {\n      var font = qx.theme.manager.Font.getInstance().resolve(\n        source.match(/@([^/]+)/)[1]\n      );\n\n      if (typeof font == \"string\") {\n        throw new Error(\n          `Cannot find font in virtual image source: '${source}'`\n        );\n      }\n      return font;\n    },\n\n    /**\n     * Combines the decorator's image styles with our own image to make sure\n     * gradient and backgroundImage decorators work on Images.\n     *\n     * @param el {Element} image DOM element\n     * @param source {String} source path\n     */\n    __setSource(el, source) {\n      var isFont = source && qx.lang.String.startsWith(source, \"@\");\n\n      if (isFont) {\n        var ResourceManager = qx.util.ResourceManager.getInstance();\n        var font = this.__getFont(source);\n        var fontStyles = qx.lang.Object.clone(font.getStyles());\n        delete fontStyles.color;\n        el.setStyles(fontStyles);\n        el.setStyle(\"font\");\n        el.setStyle(\"display\", \"table-cell\");\n        el.setStyle(\"verticalAlign\", \"middle\");\n        el.setStyle(\"textAlign\", \"center\");\n\n        this.__setFontSize(el, this.__width, this.__height);\n\n        var charCode = ResourceManager.fromFontUriToCharCode(source);\n        el.setValue(String.fromCharCode(charCode));\n\n        return;\n      } else if (el.getNodeName() == \"div\") {\n        // checks if a decorator already set.\n        // In this case we have to merge background styles\n        var decorator = qx.theme.manager.Decoration.getInstance().resolve(\n          this.getDecorator()\n        );\n\n        if (decorator) {\n          var hasGradient =\n            decorator.getStartColor() && decorator.getEndColor();\n          var hasBackground = decorator.getBackgroundImage();\n          if (hasGradient || hasBackground) {\n            var repeat = this.getScale() ? \"scale\" : \"no-repeat\";\n\n            // get the style attributes for the given source\n            var attr = qx.bom.element.Decoration.getAttributes(source, repeat);\n            // get the background image(s) defined by the decorator\n            var decoratorStyle = decorator.getStyles(true);\n\n            var combinedStyles = {\n              backgroundImage: attr.style.backgroundImage,\n              backgroundPosition: attr.style.backgroundPosition || \"0 0\",\n              backgroundRepeat: attr.style.backgroundRepeat || \"no-repeat\",\n              position: \"absolute\"\n            };\n\n            if (hasBackground) {\n              combinedStyles[\"backgroundPosition\"] +=\n                \",\" + decoratorStyle[\"background-position\"] || \"0 0\";\n              combinedStyles[\"backgroundRepeat\"] +=\n                \", \" + decorator.getBackgroundRepeat();\n            }\n\n            if (hasGradient) {\n              combinedStyles[\"backgroundPosition\"] += \", 0 0\";\n              combinedStyles[\"backgroundRepeat\"] += \", no-repeat\";\n            }\n\n            combinedStyles[\"backgroundImage\"] +=\n              \",\" +\n              (decoratorStyle[\"background-image\"] ||\n                decoratorStyle[\"background\"]);\n\n            // apply combined background images\n            el.setStyles(combinedStyles);\n\n            return;\n          }\n        } else {\n          // force re-apply to remove old decorator styles\n          if (el.setSource) {\n            el.setSource(null);\n          }\n        }\n      }\n      if (el.setSource) {\n        el.setSource(source);\n        el.setStyle(\"position\", \"absolute\");\n      }\n    },\n\n    /**\n     * Event handler fired after the preloader has finished loading the icon\n     *\n     * @param source {String} Image source which was loaded\n     * @param imageInfo {Map} Dimensions of the loaded image\n     */\n    __loaderCallback(source, imageInfo) {\n      // Ignore the callback on already disposed images\n      if (this.$$disposed === true) {\n        return;\n      }\n\n      // Ignore when the source has already been modified\n      if (\n        source !== qx.util.AliasManager.getInstance().resolve(this.getSource())\n      ) {\n        this.fireEvent(\"aborted\");\n        return;\n      }\n\n      /// Output a warning if the image could not loaded and quit\n      if (imageInfo.failed) {\n        this.warn(\"Image could not be loaded: \" + source);\n        this.fireEvent(\"loadingFailed\");\n      } else if (imageInfo.aborted) {\n        this.fireEvent(\"aborted\");\n        return;\n      } else {\n        this.fireEvent(\"loaded\");\n      }\n\n      // Update image\n      this.__setUnmanagedImage(this.__getContentElement(), source);\n    },\n\n    /**\n     * Updates the content hint when the image size has been changed\n     *\n     * @param width {Integer} width of the image\n     * @param height {Integer} height of the image\n     */\n    __updateContentHint(width, height) {\n      if (width === undefined) {\n        width = this.__width;\n      }\n      if (height === undefined) {\n        height = this.__height;\n      }\n      if (this._recalc(width, height)) {\n        qx.ui.core.queue.Layout.add(this);\n      }\n    },\n\n    /**\n     * Recalculates the size of the image, according to scaling parameters\n     * @param maxWidth {Integer?} maximum width restriction\n     * @param maxHeight {Integer?} minimum height restriction\n     */\n    _recalc(originalWidth, originalHeight) {\n      var maxWidth = this.getMaxWidth();\n      var maxHeight = this.getMaxHeight();\n      var minWidth = this.getMinWidth();\n      var minHeight = this.getMinHeight();\n\n      var width = originalWidth;\n      var height = originalHeight;\n\n      var ratio = originalHeight / originalWidth;\n\n      switch (this.getForceRatio()) {\n        case \"height\":\n          if (maxHeight !== null && height > maxHeight) {\n            height = maxHeight;\n            width = height / ratio;\n          } else if (height < minHeight) {\n            height = minHeight;\n            width = height / ratio;\n          }\n          if (height < maxHeight && this.isAllowScaleUp()) {\n            height = maxHeight;\n            width = height / ratio;\n          }\n          break;\n\n        case \"width\":\n          if (maxWidth !== null && width > maxWidth) {\n            width = maxWidth;\n            height = width * ratio;\n          } else if (width < minWidth) {\n            width = minWidth;\n            height = width * ratio;\n          }\n          if (width < maxWidth && this.isAllowScaleUp()) {\n            width = maxWidth;\n            height = width * ratio;\n          }\n          break;\n\n        case \"auto\":\n        case \"bestfit\":\n          if (maxWidth !== null && width > maxWidth) {\n            width = maxWidth;\n            height = width * ratio;\n          } else if (width < minWidth) {\n            width = minWidth;\n            height = width * ratio;\n          }\n          if (width < maxWidth && this.isAllowScaleUp()) {\n            width = maxWidth;\n            height = width * ratio;\n          }\n          if (maxHeight !== null && height > maxHeight) {\n            height = maxHeight;\n            width = height / ratio;\n          }\n          break;\n      }\n\n      width = Math.round(width);\n      height = Math.round(height);\n      if (width != this.__width || height != this.__height) {\n        this.__width = width;\n        this.__height = height;\n        return true;\n      }\n      return false;\n    }\n  },\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct() {\n    for (var mode in this.__contentElements) {\n      if (this.__contentElements.hasOwnProperty(mode)) {\n        this.__contentElements[mode].disconnectObject(this);\n      }\n    }\n\n    delete this.__currentContentElement;\n    if (this.__wrapper) {\n      delete this.__wrapper;\n    }\n\n    this._disposeMap(\"__contentElements\");\n  }\n});\n"
  ]
}