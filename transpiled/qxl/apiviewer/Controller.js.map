{
  "version": 3,
  "sources": [
    "/home/runner/work/hkollmann.mobilegrid/hkollmann.mobilegrid/qx_packages/qooxdoo_qxl_apiviewer_v2_0_0/source/class/qxl/apiviewer/Controller.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "construct",
    "widgetRegistry",
    "_widgetRegistry",
    "qxl",
    "apiviewer",
    "MWidgetRegistry",
    "_titlePrefix",
    "document",
    "title",
    "ClassLoader",
    "setBaseUri",
    "$$appRoot",
    "RESOURCEPATH",
    "_detailLoader",
    "getWidgetById",
    "_tabViewController",
    "TabViewController",
    "__bindTabViewController",
    "_tree",
    "__bindTree",
    "__bindToolbar",
    "btn_inherited",
    "btn_included",
    "addListener",
    "__syncMenuButton",
    "_history",
    "bom",
    "History",
    "getInstance",
    "__bindHistory",
    "Init",
    "getApplication",
    "getRoot",
    "e",
    "__openInNewTab",
    "isShiftPressed",
    "isCtrlOrCommandPressed",
    "members",
    "$$logCategory",
    "load",
    "classes",
    "setTimeout",
    "start",
    "Date",
    "classname",
    "dao",
    "getClassByName",
    "rootPackage",
    "Package",
    "getPackage",
    "end",
    "setTreeData",
    "state",
    "getState",
    "__selectItem",
    "__decodeState",
    "evt",
    "_updateHistory",
    "getData",
    "page",
    "_ignoreTabViewSelection",
    "getUserData",
    "nodeName",
    "itemName",
    "resetSelection",
    "treeNode",
    "_ignoreTreeSelection",
    "uiModel",
    "UiModel",
    "bind",
    "btn_expand",
    "btn_protected",
    "btn_private",
    "btn_internal",
    "menuButton",
    "showInherited",
    "getValue",
    "showMixins",
    "setIcon",
    "item",
    "className",
    "newTitle",
    "addToHistory",
    "__encodeState",
    "_selectClass",
    "classNode",
    "callback",
    "self",
    "exclude",
    "showTabView",
    "loadDependedClasses",
    "openClass",
    "openPackage",
    "call",
    "fullItemName",
    "LoadingIndicator",
    "show",
    "hashPos",
    "indexOf",
    "substring",
    "parenPos",
    "trim",
    "selectTreeNodeByClassName",
    "then",
    "couldSelectTreeNode",
    "error",
    "hide",
    "sel",
    "getSelection",
    "getClassOrPackage",
    "isLoaded",
    "showItem",
    "replace",
    "encodedState",
    "destruct",
    "_disposeObjects",
    "Controller"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,0BAAhB,EAA4C;AAC1CC,IAAAA,MAAM,EAAEN,EAAE,CAACO,IAAH,CAAQC,MAD0B;;AAG1C;AACF;AACA;AACA;AACA;;AACE;AACF;AACA;AACA;AACA;AACA;AACA;AACEC,IAAAA,SAf0C,qBAehCC,cAfgC,EAehB;AACxB;AAEA,WAAKC,eAAL,GAAuBC,GAAG,CAACC,SAAJ,CAAcC,eAArC;AAEA,WAAKC,YAAL,GAAoB,mBAApB;AACAC,MAAAA,QAAQ,CAACC,KAAT,GAAiB,KAAKF,YAAtB;AAEAH,MAAAA,GAAG,CAACC,SAAJ,CAAcK,WAAd,CAA0BC,UAA1B,WACKnB,EAAE,CAACoB,SADR,yBACgCR,GAAG,CAACC,SAAJ,CAAcK,WAAd,CAA0BG,YAD1D;AAIA,WAAKC,aAAL,GAAqB,KAAKX,eAAL,CAAqBY,aAArB,CAAmC,eAAnC,CAArB;AACA,WAAKC,kBAAL,GAA0B,IAAIZ,GAAG,CAACC,SAAJ,CAAcY,iBAAlB,CACxB,KAAKd,eADmB,CAA1B;;AAGA,WAAKe,QAAL;;AAEA,WAAKC,KAAL,GAAa,KAAKhB,eAAL,CAAqBY,aAArB,CAAmC,MAAnC,CAAb;;AACA,WAAKK,QAAL;;AAEA,WAAKC,QAAL;;AAEA,UAAIC,aAAa,GAAG,KAAKnB,eAAL,CAAqBY,aAArB,CAAmC,eAAnC,CAApB;;AACA,UAAIQ,YAAY,GAAG,KAAKpB,eAAL,CAAqBY,aAArB,CAAmC,cAAnC,CAAnB;;AAEAO,MAAAA,aAAa,CAACE,WAAd,CAA0B,aAA1B,EAAyC,KAAKC,QAA9C,EAAgE,IAAhE;AACAF,MAAAA,YAAY,CAACC,WAAb,CAAyB,aAAzB,EAAwC,KAAKC,QAA7C,EAA+D,IAA/D;AAEA,WAAKC,QAAL,GAAgBlC,EAAE,CAACmC,GAAH,CAAOC,OAAP,CAAeC,WAAf,EAAhB;;AACA,WAAKC,QAAL;;AAEAtC,MAAAA,EAAE,CAACO,IAAH,CAAQgC,IAAR,CAAaC,cAAb,GACGC,OADH,GAEGT,WAFH,CAGI,aAHJ,EAII,UAAUU,CAAV,EAAa;AACX,aAAKC,QAAL,GACED,CAAC,CAACE,cAAF,MAAsBF,CAAC,CAACG,sBAAF,EADxB;AAED,OAPL,EAQI,IARJ,EASI,IATJ;AAWD,KA1DyC;AA4D1CC,IAAAA,OAAO,EAAE;AACPH,MAAAA,QAAc,EAAE,KADT;AAGP;AACAI,MAAAA,aAAa,EAAE,aAJR;;AAMP;AACJ;AACA;AACA;AACA;AACA;AACIC,MAAAA,IAZO,gBAYFC,OAZE,EAYO;AAAA;;AACZC,QAAAA,UAAU,CAAC,YAAM;AACf,cAAIC,KAAK,GAAG,IAAIC,IAAJ,EAAZ;;AADe,qDAEOH,OAFP;AAAA;;AAAA;AAEf,gEAA+B;AAAA,kBAAtBI,SAAsB;AAC7BzC,cAAAA,GAAG,CAACC,SAAJ,CAAcyC,GAAd,CAAkBlD,KAAlB,CAAwBmD,cAAxB,CAAuCF,SAAvC,EAAkD,IAAlD;AACD;AAJc;AAAA;AAAA;AAAA;AAAA;;AAKf,cAAIG,WAAW,GAAG5C,GAAG,CAACC,SAAJ,CAAcyC,GAAd,CAAkBG,OAAlB,CAA0BC,UAA1B,CAAqC,IAArC,CAAlB;AACA,cAAIC,GAAG,GAAG,IAAIP,IAAJ,EAAV;AAQAD,UAAAA,KAAK,GAAG,IAAIC,IAAJ,EAAR;;AACA,UAAA,KAAI,CAACzB,KAAL,CAAWiC,WAAX,CAAuBJ,WAAvB;;AACAG,UAAAA,GAAG,GAAG,IAAIP,IAAJ,EAAN;AAMAF,UAAAA,UAAU,CAAC,YAAM;AACf;AACA,gBAAIW,KAAK,GAAG,KAAI,CAAC3B,QAAL,CAAc4B,QAAd,EAAZ;;AACA,gBAAID,KAAJ,EAAW;AACT,cAAA,KAAI,CAACE,QAAL,CAAkB,KAAI,CAACC,QAAL,CAAmBH,KAAnB,CAAlB;AACD,aAFD,MAEO;AACL,cAAA,KAAI,CAACE,QAAL,CAAkB,EAAlB;AACD;AACF,WARS,CAAV;AASD,SA/BS,CAAV;AAgCD,OA7CM;;AA+CP;AACJ;AACA;AACIrC,MAAAA,QAlDO,sBAkDmB;AACxB,aAAKF,kBAAL,CAAwBQ,WAAxB,CACE,iBADF,EAEE,UAAUiC,GAAV,EAAe;AACb,eAAKC,cAAL,CAAoBD,GAAG,CAACE,OAAJ,EAApB;AACD,SAJH,EAKE,IALF;;AAQA,aAAK3C,kBAAL,CAAwBQ,WAAxB,CACE,iBADF,EAEE,UAAUiC,GAAV,EAAe;AACb,cAAIG,IAAI,GAAGH,GAAG,CAACE,OAAJ,GAAc,CAAd,CAAX;;AAEA,cAAI,KAAKE,uBAAL,IAAgC,IAApC,EAA0C;AACxC;AACD;;AAED,cAAID,IAAI,IAAIA,IAAI,CAACE,WAAL,CAAiB,UAAjB,CAAZ,EAA0C;AACxC,gBAAIC,QAAQ,GAAGH,IAAI,CAACE,WAAL,CAAiB,UAAjB,CAAf;AACA,gBAAIE,QAAQ,GAAGJ,IAAI,CAACE,WAAL,CAAiB,UAAjB,CAAf;;AAEA,gBAAIE,QAAQ,KAAK,IAAjB,EAAuB;AACrB,mBAAKN,cAAL,CAAoBK,QAApB;AACD,aAFD,MAEO;AACL,mBAAKL,cAAL,CAAoBK,QAAQ,GAAG,GAAX,GAAiBC,QAArC;AACD;AACF,WATD,MASO;AACL,iBAAK7C,KAAL,CAAW8C,cAAX;AACD;AACF,SArBH,EAsBE,IAtBF;AAwBD,OAnFM;;AAqFP;AACJ;AACA;AACI7C,MAAAA,QAxFO,sBAwFM;AACX,aAAKD,KAAL,CAAWK,WAAX,CACE,iBADF,EAEE,UAAUiC,GAAV,EAAe;AACb,cAAIS,QAAQ,GAAGT,GAAG,CAACE,OAAJ,GAAc,CAAd,CAAf;;AACA,cACEO,QAAQ,IACRA,QAAQ,CAACJ,WAAT,CAAqB,UAArB,CADA,IAEA,CAAC,KAAKK,oBAHR,EAIE;AACA,gBAAIJ,QAAQ,GAAGG,QAAQ,CAACJ,WAAT,CAAqB,UAArB,CAAf,CADA,CAGA;;AACA,iBAAKJ,cAAL,CAAoBK,QAApB;AACD;AACF,SAdH,EAeE,IAfF;AAiBD,OA1GM;;AA4GP;AACJ;AACA;AACI1C,MAAAA,QA/GO,sBA+GS;AACd,YAAI+C,OAAO,GAAGhE,GAAG,CAACC,SAAJ,CAAcgE,OAAd,CAAsBxC,WAAtB,EAAd;;AAEA,YAAIP,aAAa,GAAG,KAAKnB,eAAL,CAAqBY,aAArB,CAAmC,eAAnC,CAApB;;AACAO,QAAAA,aAAa,CAACgD,IAAd,CAAmB,OAAnB,EAA4BF,OAA5B,EAAqC,eAArC;AACAA,QAAAA,OAAO,CAACE,IAAR,CAAa,eAAb,EAA8BhD,aAA9B,EAA6C,OAA7C;;AAEA,YAAIC,YAAY,GAAG,KAAKpB,eAAL,CAAqBY,aAArB,CAAmC,cAAnC,CAAnB;;AACAQ,QAAAA,YAAY,CAAC+C,IAAb,CAAkB,OAAlB,EAA2BF,OAA3B,EAAoC,cAApC;AACAA,QAAAA,OAAO,CAACE,IAAR,CAAa,cAAb,EAA6B/C,YAA7B,EAA2C,OAA3C;;AAEA,YAAIgD,UAAU,GAAG,KAAKpE,eAAL,CAAqBY,aAArB,CAAmC,YAAnC,CAAjB;;AACAwD,QAAAA,UAAU,CAACD,IAAX,CAAgB,OAAhB,EAAyBF,OAAzB,EAAkC,kBAAlC;AACAA,QAAAA,OAAO,CAACE,IAAR,CAAa,kBAAb,EAAiCC,UAAjC,EAA6C,OAA7C;;AAEA,YAAIC,aAAa,GAAG,KAAKrE,eAAL,CAAqBY,aAArB,CAAmC,eAAnC,CAApB;;AACAyD,QAAAA,aAAa,CAACF,IAAd,CAAmB,OAAnB,EAA4BF,OAA5B,EAAqC,eAArC;AACAA,QAAAA,OAAO,CAACE,IAAR,CAAa,eAAb,EAA8BE,aAA9B,EAA6C,OAA7C;;AAEA,YAAIC,WAAW,GAAG,KAAKtE,eAAL,CAAqBY,aAArB,CAAmC,aAAnC,CAAlB;;AACA0D,QAAAA,WAAW,CAACH,IAAZ,CAAiB,OAAjB,EAA0BF,OAA1B,EAAmC,aAAnC;AACAA,QAAAA,OAAO,CAACE,IAAR,CAAa,aAAb,EAA4BG,WAA5B,EAAyC,OAAzC;;AAEA,YAAIC,YAAY,GAAG,KAAKvE,eAAL,CAAqBY,aAArB,CAAmC,cAAnC,CAAnB;;AACA2D,QAAAA,YAAY,CAACJ,IAAb,CAAkB,OAAlB,EAA2BF,OAA3B,EAAoC,cAApC;AACAA,QAAAA,OAAO,CAACE,IAAR,CAAa,cAAb,EAA6BI,YAA7B,EAA2C,OAA3C;AACD,OAzIM;;AA2IP;AACJ;AACA;AACA;AACA;AACIjD,MAAAA,QAhJO,sBAgJY;AACjB,YAAIkD,UAAU,GAAG,KAAKxE,eAAL,CAAqBY,aAArB,CAAmC,kBAAnC,CAAjB;;AACA,YAAIO,aAAa,GAAG,KAAKnB,eAAL,CAAqBY,aAArB,CAAmC,eAAnC,CAApB;;AACA,YAAIQ,YAAY,GAAG,KAAKpB,eAAL,CAAqBY,aAArB,CAAmC,cAAnC,CAAnB;;AACA,YAAI6D,aAAa,GAAGtD,aAAa,CAACuD,QAAd,EAApB;AACA,YAAIC,UAAU,GAAGvD,YAAY,CAACsD,QAAb,EAAjB;;AACA,YAAIC,UAAU,IAAIF,aAAlB,EAAiC;AAC/BD,UAAAA,UAAU,CAACI,OAAX,CACE,uDADF;AAGD;;AACD,YAAIH,aAAa,IAAI,CAACE,UAAtB,EAAkC;AAChCH,UAAAA,UAAU,CAACI,OAAX,CAAmB,mDAAnB;AACD;;AACD,YAAI,CAACH,aAAD,IAAkBE,UAAtB,EAAkC;AAChCH,UAAAA,UAAU,CAACI,OAAX,CAAmB,yCAAnB;AACD;;AACD,YAAI,CAACH,aAAD,IAAkB,CAACE,UAAvB,EAAmC;AACjCH,UAAAA,UAAU,CAACI,OAAX,CAAmB,kCAAnB;AACD;AACF,OApKM;;AAsKP;AACJ;AACA;AACIjD,MAAAA,QAzKO,sBAyKS;AACd,aAAKJ,QAAL,CAAcF,WAAd,CACE,aADF,EAEE,UAAUiC,GAAV,EAAe;AACb,cAAIuB,IAAI,GAAG,KAAKxB,QAAL,CAAmBC,GAAG,CAACE,OAAJ,EAAnB,CAAX;;AACA,cAAIqB,IAAJ,EAAU;AACR,iBAAKzB,QAAL,CAAkByB,IAAlB;AACD;AACF,SAPH,EAQE,IARF;AAUD,OApLM;;AAsLP;AACJ;AACA;AACA;AACA;AACA;AACItB,MAAAA,cA5LO,0BA4LQuB,SA5LR,EA4LmB;AACxB,YAAIC,QAAQ,GAAGD,SAAS,GAAG,KAAZ,GAAoB,KAAK1E,YAAxC;AACAf,QAAAA,EAAE,CAACmC,GAAH,CAAOC,OAAP,CAAeC,WAAf,GAA6BsD,YAA7B,CACE,KAAKC,QAAL,CAAmBH,SAAnB,CADF,EAEEC,QAFF;AAID,OAlMM;;AAoMP;AACJ;AACA;AACA;AACA;AACA;AACA;AACUG,MAAAA,YA3MC,wBA2MYC,SA3MZ,EA2MuBC,QA3MvB,EA2MiCC,IA3MjC,EA2MuC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAC5C,kBAAA,MAAI,CAAC1E,aAAL,CAAmB2E,OAAnB;;AACA,kBAAA,MAAI,CAACzE,kBAAL,CAAwB0E,WAAxB;;AAF4C;AAAA,yBAGtCJ,SAAS,CAACK,mBAAV,EAHsC;;AAAA;AAAA,wBAIxCL,SAAS,YAAYlF,GAAG,CAACC,SAAJ,CAAcyC,GAAd,CAAkBlD,KAJC;AAAA;AAAA;AAAA;;AAAA;AAAA,yBAKpC,MAAI,CAACoB,kBAAL,CAAwB4E,SAAxB,CAAkCN,SAAlC,EAA6C,MAAI,CAACnD,QAAlD,CALoC;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,yBAOpC,MAAI,CAACnB,kBAAL,CAAwB6E,WAAxB,CACJP,SADI,EAEJ,MAAI,CAACnD,QAFD,CAPoC;;AAAA;AAY5CoD,kBAAAA,QAAQ,IAAIA,QAAQ,CAACO,IAAT,CAAcN,IAAd,CAAZ;;AAZ4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAa7C,OAxNM;;AA0NP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACIjC,MAAAA,QAlOO,oBAkOMwC,YAlON,EAkOoB;AAAA;;AACzB3F,QAAAA,GAAG,CAACC,SAAJ,CAAc2F,gBAAd,CAA+BnE,WAA/B,GAA6CoE,IAA7C;AACA,YAAIhB,SAAS,GAAGc,YAAhB;AACA,YAAI/B,QAAQ,GAAG,IAAf;AACA,YAAIkC,OAAO,GAAGH,YAAY,CAACI,OAAb,CAAqB,GAArB,CAAd;;AAEA,YAAID,OAAO,IAAI,CAAC,CAAhB,EAAmB;AACjBjB,UAAAA,SAAS,GAAGc,YAAY,CAACK,SAAb,CAAuB,CAAvB,EAA0BF,OAA1B,CAAZ;AACAlC,UAAAA,QAAQ,GAAG+B,YAAY,CAACK,SAAb,CAAuBF,OAAO,GAAG,CAAjC,CAAX;AAEA,cAAIG,QAAQ,GAAGrC,QAAQ,CAACmC,OAAT,CAAiB,GAAjB,CAAf;;AAEA,cAAIE,QAAQ,IAAI,CAAC,CAAjB,EAAoB;AAClBrC,YAAAA,QAAQ,GAAGA,QAAQ,CAACoC,SAAT,CAAmB,CAAnB,EAAsBC,QAAtB,EAAgCC,IAAhC,EAAX;AACD;AACF,SAfwB,CAiBzB;;;AACA,aAAKnC,oBAAL,GAA4B,IAA5B;;AACA,aAAKhD,KAAL,CACGoF,yBADH,CAC6BtB,SAD7B,EAEGuB,IAFH,CAEQ,UAACC,mBAAD,EAAyB;AAC7B,UAAA,MAAI,CAACtC,oBAAL,GAA4B,KAA5B;;AAEA,cAAI,CAACsC,mBAAL,EAA0B;AACxB,YAAA,MAAI,CAACC,KAAL,CAAW,oBAAoBzB,SAA/B;;AACA7E,YAAAA,GAAG,CAACC,SAAJ,CAAc2F,gBAAd,CAA+BnE,WAA/B,GAA6C8E,IAA7C;AACA;AACD;;AAED,cAAIC,GAAG,GAAG,MAAI,CAACzF,KAAL,CAAW0F,YAAX,EAAV;;AACA,cAAI9C,QAAQ,GAAG6C,GAAG,CAAC,CAAD,CAAH,CAAO9C,WAAP,CAAmB,UAAnB,KAAkCmB,SAAjD;AAEA,UAAA,MAAI,CAACpB,uBAAL,GAA+B,IAA/B;;AACA,UAAA,MAAI,CAACwB,YAAL,CACEjF,GAAG,CAACC,SAAJ,CAAcK,WAAd,CAA0BoG,iBAA1B,CAA4C/C,QAA5C,CADF,EAEE,YAAM;AACJ,gBAAIC,QAAJ,EAAc;AACZ,cAAA,MAAI,CAAChD,kBAAL,CAAwB+F,QAAxB,CAAiC,YAAM;AACrC,oBAAI,CAAC,MAAI,CAAC/F,kBAAL,CAAwBgG,QAAxB,CAAiChD,QAAjC,CAAL,EAAiD;AAC/C,kBAAA,MAAI,CAAC0C,KAAL,CACE,4BAA4BzB,SAA5B,GAAwC,KAAxC,GAAgDjB,QADlD;;AAGA5D,kBAAAA,GAAG,CAACC,SAAJ,CAAc2F,gBAAd,CAA+BnE,WAA/B,GAA6C8E,IAA7C;;AACA,kBAAA,MAAI,CAACjD,cAAL,CAAoBuB,SAApB;;AACA,kBAAA,MAAI,CAACpB,uBAAL,GAA+B,KAA/B;AACA;AACD;;AACD,gBAAA,MAAI,CAACH,cAAL,CAAoBqC,YAApB;;AACA3F,gBAAAA,GAAG,CAACC,SAAJ,CAAc2F,gBAAd,CAA+BnE,WAA/B,GAA6C8E,IAA7C;AACA,gBAAA,MAAI,CAAC9C,uBAAL,GAA+B,KAA/B;AACD,eAbD;AAcD,aAfD,MAeO;AACLzD,cAAAA,GAAG,CAACC,SAAJ,CAAc2F,gBAAd,CAA+BnE,WAA/B,GAA6C8E,IAA7C;AACA,cAAA,MAAI,CAAC9C,uBAAL,GAA+B,KAA/B;AACD;AACF,WAtBH;AAwBD,SAvCH;AAwCD,OA7RM;AA+RPuB,MAAAA,QA/RO,oBA+RO/B,KA/RP,EA+Rc;AACnB,eAAOA,KAAK,CAAC4D,OAAN,CAAc,YAAd,EAA4B,OAA5B,CAAP;AACD,OAjSM;AAmSPzD,MAAAA,QAnSO,oBAmSO0D,YAnSP,EAmSqB;AAC1B,eAAOA,YAAY,CAACD,OAAb,CAAqB,YAArB,EAAmC,OAAnC,CAAP;AACD;AArSM,KA5DiC;;AAoW1C;AACF;AACA;AACA;AACA;AAEEE,IAAAA,QA1W0C,sBA0W/B;AACT,WAAKhH,eAAL,GAAuB,IAAvB;;AACA,WAAKiH,eAAL,CACE,eADF,EAEE,OAFF,EAGE,UAHF,EAIE,oBAJF;AAMD;AAlXyC,GAA5C;AA9BAhH,EAAAA,GAAG,CAACC,SAAJ,CAAcgH,UAAd,CAAyB1H,aAAzB,GAAyCA,aAAzC",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n     2018 Zenesis Limited, http://www.zenesis.com\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * John Spackman (johnspackman)\n     * Til Schneider (til132)\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Fabian Jakobs (fjakobs)\n     * Jonathan Weiß (jonathan_rass)\n     * Henner Kollmann (hkollmann)\n\n************************************************************************ */\n\n/**\n * Implements the dynamic behavior of the API viewer. The GUI is defined in\n * {@link Viewer}.\n *\n */\nqx.Class.define(\"qxl.apiviewer.Controller\", {\n  extend: qx.core.Object,\n\n  /*\n   * ****************************************************************************\n   * CONSTRUCTOR\n   * ****************************************************************************\n   */\n  /**\n   * @param widgetRegistry\n   *          {Viewer} the GUI\n   *\n   * @ignore (qx.$$appRoot)\n   *\n   */\n  construct(widgetRegistry) {\n    super();\n\n    this._widgetRegistry = qxl.apiviewer.MWidgetRegistry;\n\n    this._titlePrefix = \"API Documentation\";\n    document.title = this._titlePrefix;\n\n    qxl.apiviewer.ClassLoader.setBaseUri(\n      `${qx.$$appRoot}../resource/${qxl.apiviewer.ClassLoader.RESOURCEPATH}/`\n    );\n\n    this._detailLoader = this._widgetRegistry.getWidgetById(\"detail_loader\");\n    this._tabViewController = new qxl.apiviewer.TabViewController(\n      this._widgetRegistry\n    );\n    this.__bindTabViewController();\n\n    this._tree = this._widgetRegistry.getWidgetById(\"tree\");\n    this.__bindTree();\n\n    this.__bindToolbar();\n\n    var btn_inherited = this._widgetRegistry.getWidgetById(\"btn_inherited\");\n    var btn_included = this._widgetRegistry.getWidgetById(\"btn_included\");\n\n    btn_inherited.addListener(\"changeValue\", this.__syncMenuButton, this);\n    btn_included.addListener(\"changeValue\", this.__syncMenuButton, this);\n\n    this._history = qx.bom.History.getInstance();\n    this.__bindHistory();\n\n    qx.core.Init.getApplication()\n      .getRoot()\n      .addListener(\n        \"pointerdown\",\n        function (e) {\n          this.__openInNewTab =\n            e.isShiftPressed() || e.isCtrlOrCommandPressed();\n        },\n        this,\n        true\n      );\n  },\n\n  members: {\n    __openInNewTab: false,\n\n    // overridden\n    $$logCategory: \"application\",\n\n    /**\n     * Loads the API doc tree from the enviroment\n     * doc tree.\n     *\n     * @param classes [] all classes to show\n     */\n    load(classes) {\n      setTimeout(() => {\n        var start = new Date();\n        for (var classname of classes) {\n          qxl.apiviewer.dao.Class.getClassByName(classname, true);\n        }\n        var rootPackage = qxl.apiviewer.dao.Package.getPackage(null);\n        var end = new Date();\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          this.debug(\n            \"Time to build data tree: \" +\n              (end.getTime() - start.getTime()) +\n              \"ms\"\n          );\n        }\n        start = new Date();\n        this._tree.setTreeData(rootPackage);\n        end = new Date();\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          this.debug(\n            \"Time to update tree: \" + (end.getTime() - start.getTime()) + \"ms\"\n          );\n        }\n        setTimeout(() => {\n          // Handle bookmarks\n          var state = this._history.getState();\n          if (state) {\n            this.__selectItem(this.__decodeState(state));\n          } else {\n            this.__selectItem(\"\");\n          }\n        });\n      });\n    },\n\n    /**\n     * binds the events of the TabView controller\n     */\n    __bindTabViewController() {\n      this._tabViewController.addListener(\n        \"classLinkTapped\",\n        function (evt) {\n          this._updateHistory(evt.getData());\n        },\n        this\n      );\n\n      this._tabViewController.addListener(\n        \"changeSelection\",\n        function (evt) {\n          var page = evt.getData()[0];\n\n          if (this._ignoreTabViewSelection == true) {\n            return;\n          }\n\n          if (page && page.getUserData(\"nodeName\")) {\n            var nodeName = page.getUserData(\"nodeName\");\n            var itemName = page.getUserData(\"itemName\");\n\n            if (itemName === null) {\n              this._updateHistory(nodeName);\n            } else {\n              this._updateHistory(nodeName + \"#\" + itemName);\n            }\n          } else {\n            this._tree.resetSelection();\n          }\n        },\n        this\n      );\n    },\n\n    /**\n     * binds the selection event of the package tree.\n     */\n    __bindTree() {\n      this._tree.addListener(\n        \"changeSelection\",\n        function (evt) {\n          var treeNode = evt.getData()[0];\n          if (\n            treeNode &&\n            treeNode.getUserData(\"nodeName\") &&\n            !this._ignoreTreeSelection\n          ) {\n            var nodeName = treeNode.getUserData(\"nodeName\");\n\n            // the history update will cause _selectClass to be called.\n            this._updateHistory(nodeName);\n          }\n        },\n        this\n      );\n    },\n\n    /**\n     * binds the actions of the toolbar buttons.\n     */\n    __bindToolbar() {\n      var uiModel = qxl.apiviewer.UiModel.getInstance();\n\n      var btn_inherited = this._widgetRegistry.getWidgetById(\"btn_inherited\");\n      btn_inherited.bind(\"value\", uiModel, \"showInherited\");\n      uiModel.bind(\"showInherited\", btn_inherited, \"value\");\n\n      var btn_included = this._widgetRegistry.getWidgetById(\"btn_included\");\n      btn_included.bind(\"value\", uiModel, \"showIncluded\");\n      uiModel.bind(\"showIncluded\", btn_included, \"value\");\n\n      var btn_expand = this._widgetRegistry.getWidgetById(\"btn_expand\");\n      btn_expand.bind(\"value\", uiModel, \"expandProperties\");\n      uiModel.bind(\"expandProperties\", btn_expand, \"value\");\n\n      var btn_protected = this._widgetRegistry.getWidgetById(\"btn_protected\");\n      btn_protected.bind(\"value\", uiModel, \"showProtected\");\n      uiModel.bind(\"showProtected\", btn_protected, \"value\");\n\n      var btn_private = this._widgetRegistry.getWidgetById(\"btn_private\");\n      btn_private.bind(\"value\", uiModel, \"showPrivate\");\n      uiModel.bind(\"showPrivate\", btn_private, \"value\");\n\n      var btn_internal = this._widgetRegistry.getWidgetById(\"btn_internal\");\n      btn_internal.bind(\"value\", uiModel, \"showInternal\");\n      uiModel.bind(\"showInternal\", btn_internal, \"value\");\n    },\n\n    /**\n     * Keeps the icon of the menubutton in sync with the menu checkboxes of\n     * inherited and mixin includes.\n     *\n     */\n    __syncMenuButton() {\n      var menuButton = this._widgetRegistry.getWidgetById(\"menubtn_includes\");\n      var btn_inherited = this._widgetRegistry.getWidgetById(\"btn_inherited\");\n      var btn_included = this._widgetRegistry.getWidgetById(\"btn_included\");\n      var showInherited = btn_inherited.getValue();\n      var showMixins = btn_included.getValue();\n      if (showMixins && showInherited) {\n        menuButton.setIcon(\n          \"qxl/apiviewer/image/inherited_and_mixins_included.gif\"\n        );\n      }\n      if (showInherited && !showMixins) {\n        menuButton.setIcon(\"qxl/apiviewer/image/method_public_inherited18.gif\");\n      }\n      if (!showInherited && showMixins) {\n        menuButton.setIcon(\"qxl/apiviewer/image/overlay_mixin18.gif\");\n      }\n      if (!showInherited && !showMixins) {\n        menuButton.setIcon(\"qxl/apiviewer/image/includes.gif\");\n      }\n    },\n\n    /**\n     * bind history events\n     */\n    __bindHistory() {\n      this._history.addListener(\n        \"changeState\",\n        function (evt) {\n          var item = this.__decodeState(evt.getData());\n          if (item) {\n            this.__selectItem(item);\n          }\n        },\n        this\n      );\n    },\n\n    /**\n     * Push the class to the browser history\n     *\n     * @param className\n     *          {String} name of the class\n     */\n    _updateHistory(className) {\n      var newTitle = className + \" - \" + this._titlePrefix;\n      qx.bom.History.getInstance().addToHistory(\n        this.__encodeState(className),\n        newTitle\n      );\n    },\n\n    /**\n     * Display information about a class\n     * @param classNode\n     * {qxl.apiviewer.dao.Class} class node to display\n     * @param callback\n     * @param self\n     */\n    async _selectClass(classNode, callback, self) {\n      this._detailLoader.exclude();\n      this._tabViewController.showTabView();\n      await classNode.loadDependedClasses();\n      if (classNode instanceof qxl.apiviewer.dao.Class) {\n        await this._tabViewController.openClass(classNode, this.__openInNewTab);\n      } else {\n        await this._tabViewController.openPackage(\n          classNode,\n          this.__openInNewTab\n        );\n      }\n      callback && callback.call(self);\n    },\n\n    /**\n     * Selects an item (class, property, method or constant).\n     *\n     * @param fullItemName\n     *          {String} the full name of the item to select. (e.g.\n     *          \"qx.mypackage.MyClass\" or \"qx.mypackage.MyClass#myProperty\")\n     *\n     */\n    __selectItem(fullItemName) {\n      qxl.apiviewer.LoadingIndicator.getInstance().show();\n      var className = fullItemName;\n      var itemName = null;\n      var hashPos = fullItemName.indexOf(\"#\");\n\n      if (hashPos != -1) {\n        className = fullItemName.substring(0, hashPos);\n        itemName = fullItemName.substring(hashPos + 1);\n\n        var parenPos = itemName.indexOf(\"(\");\n\n        if (parenPos != -1) {\n          itemName = itemName.substring(0, parenPos).trim();\n        }\n      }\n\n      // ignore changeSelection events\n      this._ignoreTreeSelection = true;\n      this._tree\n        .selectTreeNodeByClassName(className)\n        .then((couldSelectTreeNode) => {\n          this._ignoreTreeSelection = false;\n\n          if (!couldSelectTreeNode) {\n            this.error(\"Unknown class: \" + className);\n            qxl.apiviewer.LoadingIndicator.getInstance().hide();\n            return;\n          }\n\n          var sel = this._tree.getSelection();\n          var nodeName = sel[0].getUserData(\"nodeName\") || className;\n\n          this._ignoreTabViewSelection = true;\n          this._selectClass(\n            qxl.apiviewer.ClassLoader.getClassOrPackage(nodeName),\n            () => {\n              if (itemName) {\n                this._tabViewController.isLoaded(() => {\n                  if (!this._tabViewController.showItem(itemName)) {\n                    this.error(\n                      \"Unknown item of class '\" + className + \"': \" + itemName\n                    );\n                    qxl.apiviewer.LoadingIndicator.getInstance().hide();\n                    this._updateHistory(className);\n                    this._ignoreTabViewSelection = false;\n                    return;\n                  }\n                  this._updateHistory(fullItemName);\n                  qxl.apiviewer.LoadingIndicator.getInstance().hide();\n                  this._ignoreTabViewSelection = false;\n                });\n              } else {\n                qxl.apiviewer.LoadingIndicator.getInstance().hide();\n                this._ignoreTabViewSelection = false;\n              }\n            }\n          );\n        });\n    },\n\n    __encodeState(state) {\n      return state.replace(/(.*)#(.*)/g, \"$1~$2\");\n    },\n\n    __decodeState(encodedState) {\n      return encodedState.replace(/(.*)~(.*)/g, \"$1#$2\");\n    },\n  },\n\n  /*\n   * ****************************************************************************\n   * DESTRUCTOR\n   * ****************************************************************************\n   */\n\n  destruct() {\n    this._widgetRegistry = null;\n    this._disposeObjects(\n      \"_detailLoader\",\n      \"_tree\",\n      \"_history\",\n      \"_tabViewController\"\n    );\n  },\n});\n"
  ]
}